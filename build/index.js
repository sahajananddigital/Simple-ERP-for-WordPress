(()=>{"use strict";var e={338:(e,t,l)=>{var a=l(795);t.H=a.createRoot,a.hydrateRoot},795:e=>{e.exports=window.ReactDOM}},t={};function l(a){var n=t[a];if(void 0!==n)return n.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,l),r.exports}l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var a in t)l.o(t,a)&&!l.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const a=window.React;var n=l(338);const r=window.wp.element,c=window.wp.i18n,p=window.wp.components,o=window.wp.apiFetch;var s=l.n(o);const m=()=>{const[e,t]=(0,r.useState)([]),[l,n]=(0,r.useState)(!0),[o,m]=(0,r.useState)(null),[u,i]=(0,r.useState)(!1),[d,E]=(0,r.useState)({first_name:"",last_name:"",email:"",phone:"",company:"",status:"lead",type:"contact"});(0,r.useEffect)(()=>{_()},[]);const _=async()=>{n(!0),m(null);try{const e=await s()({path:"/wp-erp/v1/crm/contacts"});t(e)}catch(e){m(e.message||(0,c.__)("Failed to fetch contacts","wp-erp"))}finally{n(!1)}};return(0,a.createElement)("div",{className:"wp-erp-crm",style:{padding:"16px"}},o&&(0,a.createElement)(p.Notice,{status:"error",isDismissible:!1,onRemove:()=>m(null)},o),(0,a.createElement)(p.Card,{style:{marginBottom:"24px"}},(0,a.createElement)(p.CardHeader,null,(0,a.createElement)("h2",{style:{margin:0}},(0,c.__)("Add New Contact","wp-erp"))),(0,a.createElement)(p.CardBody,null,(0,a.createElement)("form",{onSubmit:async e=>{e.preventDefault(),i(!0),m(null);try{await s()({path:"/wp-erp/v1/crm/contacts",method:"POST",data:d}),E({first_name:"",last_name:"",email:"",phone:"",company:"",status:"lead",type:"contact"}),_()}catch(e){m(e.message||(0,c.__)("Failed to create contact","wp-erp"))}finally{i(!1)}}},(0,a.createElement)(p.Flex,{direction:"column",gap:4},(0,a.createElement)(p.Flex,null,(0,a.createElement)(p.FlexBlock,null,(0,a.createElement)(p.TextControl,{label:(0,c.__)("First Name","wp-erp"),value:d.first_name,onChange:e=>E({...d,first_name:e}),required:!0})),(0,a.createElement)(p.FlexBlock,null,(0,a.createElement)(p.TextControl,{label:(0,c.__)("Last Name","wp-erp"),value:d.last_name,onChange:e=>E({...d,last_name:e}),required:!0}))),(0,a.createElement)(p.Flex,null,(0,a.createElement)(p.FlexBlock,null,(0,a.createElement)(p.TextControl,{label:(0,c.__)("Email","wp-erp"),type:"email",value:d.email,onChange:e=>E({...d,email:e})})),(0,a.createElement)(p.FlexBlock,null,(0,a.createElement)(p.TextControl,{label:(0,c.__)("Phone","wp-erp"),value:d.phone,onChange:e=>E({...d,phone:e})}))),(0,a.createElement)(p.Flex,null,(0,a.createElement)(p.FlexBlock,null,(0,a.createElement)(p.TextControl,{label:(0,c.__)("Company","wp-erp"),value:d.company,onChange:e=>E({...d,company:e})})),(0,a.createElement)(p.FlexBlock,null,(0,a.createElement)(p.SelectControl,{label:(0,c.__)("Status","wp-erp"),value:d.status,options:[{label:(0,c.__)("Lead","wp-erp"),value:"lead"},{label:(0,c.__)("Customer","wp-erp"),value:"customer"},{label:(0,c.__)("Opportunity","wp-erp"),value:"opportunity"}],onChange:e=>E({...d,status:e})}))),(0,a.createElement)(p.Flex,{justify:"flex-start"},(0,a.createElement)(p.Button,{variant:"primary",type:"submit",isBusy:u},(0,c.__)("Add Contact","wp-erp"))))))),(0,a.createElement)(p.Card,null,(0,a.createElement)(p.CardHeader,null,(0,a.createElement)("h2",{style:{margin:0}},(0,c.__)("Contacts","wp-erp"))),(0,a.createElement)(p.CardBody,null,l?(0,a.createElement)(p.Flex,{justify:"center",style:{padding:"32px"}},(0,a.createElement)(p.Spinner,null)):0===e.length?(0,a.createElement)("p",{style:{padding:"16px",textAlign:"center",color:"#757575"}},(0,c.__)("No contacts found.","wp-erp")):(0,a.createElement)("div",{style:{overflowX:"auto"}},(0,a.createElement)("table",{className:"wp-list-table widefat fixed striped"},(0,a.createElement)("thead",null,(0,a.createElement)("tr",null,(0,a.createElement)("th",null,(0,c.__)("Name","wp-erp")),(0,a.createElement)("th",null,(0,c.__)("Email","wp-erp")),(0,a.createElement)("th",null,(0,c.__)("Phone","wp-erp")),(0,a.createElement)("th",null,(0,c.__)("Company","wp-erp")),(0,a.createElement)("th",null,(0,c.__)("Status","wp-erp")))),(0,a.createElement)("tbody",null,e.map(e=>(0,a.createElement)("tr",{key:e.id},(0,a.createElement)("td",null,(0,a.createElement)("strong",null,e.first_name," ",e.last_name)),(0,a.createElement)("td",null,e.email||"-"),(0,a.createElement)("td",null,e.phone||"-"),(0,a.createElement)("td",null,e.company||"-"),(0,a.createElement)("td",null,(0,a.createElement)("span",{style:{padding:"4px 8px",borderRadius:"2px",backgroundColor:"customer"===e.status?"#00a32a":"opportunity"===e.status?"#2271b1":"#dba617",color:"#fff",fontSize:"12px",textTransform:"capitalize"}},e.status))))))))))},u=({view:e="accounts"})=>{const[t,l]=(0,r.useState)([]),[n,o]=(0,r.useState)([]),[m,u]=(0,r.useState)(!0),[i,d]=(0,r.useState)(null);(0,r.useEffect)(()=>{"accounts"===e?E():_()},[e]);const E=async()=>{u(!0),d(null);try{const e=await s()({path:"/wp-erp/v1/accounting/accounts"});l(e)}catch(e){d(e.message||(0,c.__)("Failed to fetch accounts","wp-erp"))}finally{u(!1)}},_=async()=>{u(!0),d(null);try{const e=await s()({path:"/wp-erp/v1/accounting/transactions"});o(e)}catch(e){d(e.message||(0,c.__)("Failed to fetch transactions","wp-erp"))}finally{u(!1)}};return"transactions"===e?(0,a.createElement)("div",{className:"wp-erp-accounting",style:{padding:"16px"}},i&&(0,a.createElement)(p.Notice,{status:"error",isDismissible:!1,onRemove:()=>d(null)},i),(0,a.createElement)(p.Card,null,(0,a.createElement)(p.CardHeader,null,(0,a.createElement)("h2",{style:{margin:0}},(0,c.__)("Transactions","wp-erp"))),(0,a.createElement)(p.CardBody,null,m?(0,a.createElement)(p.Flex,{justify:"center",style:{padding:"32px"}},(0,a.createElement)(p.Spinner,null)):0===n.length?(0,a.createElement)("p",{style:{padding:"16px",textAlign:"center",color:"#757575"}},(0,c.__)("No transactions found.","wp-erp")):(0,a.createElement)("div",{style:{overflowX:"auto"}},(0,a.createElement)("table",{className:"wp-list-table widefat fixed striped"},(0,a.createElement)("thead",null,(0,a.createElement)("tr",null,(0,a.createElement)("th",null,(0,c.__)("Voucher No","wp-erp")),(0,a.createElement)("th",null,(0,c.__)("Type","wp-erp")),(0,a.createElement)("th",null,(0,c.__)("Date","wp-erp")),(0,a.createElement)("th",null,(0,c.__)("Reference","wp-erp")),(0,a.createElement)("th",null,(0,c.__)("Total","wp-erp")))),(0,a.createElement)("tbody",null,n.map(e=>(0,a.createElement)("tr",{key:e.id},(0,a.createElement)("td",null,(0,a.createElement)("strong",null,e.voucher_no)),(0,a.createElement)("td",null,e.type),(0,a.createElement)("td",null,e.date),(0,a.createElement)("td",null,e.reference||"-"),(0,a.createElement)("td",null,(0,a.createElement)("strong",null,e.total)))))))))):(0,a.createElement)("div",{className:"wp-erp-accounting",style:{padding:"16px"}},i&&(0,a.createElement)(p.Notice,{status:"error",isDismissible:!1,onRemove:()=>d(null)},i),(0,a.createElement)(p.Card,null,(0,a.createElement)(p.CardHeader,null,(0,a.createElement)("h2",{style:{margin:0}},(0,c.__)("Chart of Accounts","wp-erp"))),(0,a.createElement)(p.CardBody,null,m?(0,a.createElement)(p.Flex,{justify:"center",style:{padding:"32px"}},(0,a.createElement)(p.Spinner,null)):0===t.length?(0,a.createElement)("p",{style:{padding:"16px",textAlign:"center",color:"#757575"}},(0,c.__)("No accounts found.","wp-erp")):(0,a.createElement)("div",{style:{overflowX:"auto"}},(0,a.createElement)("table",{className:"wp-list-table widefat fixed striped"},(0,a.createElement)("thead",null,(0,a.createElement)("tr",null,(0,a.createElement)("th",null,(0,c.__)("Code","wp-erp")),(0,a.createElement)("th",null,(0,c.__)("Name","wp-erp")),(0,a.createElement)("th",null,(0,c.__)("Type","wp-erp")),(0,a.createElement)("th",null,(0,c.__)("Balance","wp-erp")))),(0,a.createElement)("tbody",null,t.map(e=>(0,a.createElement)("tr",{key:e.id},(0,a.createElement)("td",null,(0,a.createElement)("strong",null,e.code)),(0,a.createElement)("td",null,e.name),(0,a.createElement)("td",null,e.type),(0,a.createElement)("td",null,(0,a.createElement)("strong",null,e.balance))))))))))},i=({view:e="employees"})=>{const[t,l]=(0,r.useState)([]),[n,o]=(0,r.useState)(!0),[m,u]=(0,r.useState)(null);(0,r.useEffect)(()=>{"employees"===e&&i()},[e]);const i=async()=>{o(!0),u(null);try{const e=await s()({path:"/wp-erp/v1/hr/employees"});l(e)}catch(e){u(e.message||(0,c.__)("Failed to fetch employees","wp-erp"))}finally{o(!1)}};return"leaves"===e?(0,a.createElement)("div",{className:"wp-erp-hr",style:{padding:"16px"}},(0,a.createElement)(p.Card,null,(0,a.createElement)(p.CardHeader,null,(0,a.createElement)("h2",{style:{margin:0}},(0,c.__)("Leave Requests","wp-erp"))),(0,a.createElement)(p.CardBody,null,(0,a.createElement)("p",{style:{padding:"16px",textAlign:"center",color:"#757575"}},(0,c.__)("Leave management coming soon...","wp-erp"))))):(0,a.createElement)("div",{className:"wp-erp-hr",style:{padding:"16px"}},m&&(0,a.createElement)(p.Notice,{status:"error",isDismissible:!1,onRemove:()=>u(null)},m),(0,a.createElement)(p.Card,null,(0,a.createElement)(p.CardHeader,null,(0,a.createElement)("h2",{style:{margin:0}},(0,c.__)("Employees","wp-erp"))),(0,a.createElement)(p.CardBody,null,n?(0,a.createElement)(p.Flex,{justify:"center",style:{padding:"32px"}},(0,a.createElement)(p.Spinner,null)):0===t.length?(0,a.createElement)("p",{style:{padding:"16px",textAlign:"center",color:"#757575"}},(0,c.__)("No employees found.","wp-erp")):(0,a.createElement)("div",{style:{overflowX:"auto"}},(0,a.createElement)("table",{className:"wp-list-table widefat fixed striped"},(0,a.createElement)("thead",null,(0,a.createElement)("tr",null,(0,a.createElement)("th",null,(0,c.__)("Employee ID","wp-erp")),(0,a.createElement)("th",null,(0,c.__)("Name","wp-erp")),(0,a.createElement)("th",null,(0,c.__)("Designation","wp-erp")),(0,a.createElement)("th",null,(0,c.__)("Department","wp-erp")),(0,a.createElement)("th",null,(0,c.__)("Status","wp-erp")))),(0,a.createElement)("tbody",null,t.map(e=>(0,a.createElement)("tr",{key:e.id},(0,a.createElement)("td",null,(0,a.createElement)("strong",null,e.employee_id)),(0,a.createElement)("td",null,e.user_id?`User #${e.user_id}`:"-"),(0,a.createElement)("td",null,e.designation||"-"),(0,a.createElement)("td",null,e.department||"-"),(0,a.createElement)("td",null,(0,a.createElement)("span",{style:{padding:"4px 8px",borderRadius:"2px",backgroundColor:"active"===e.status?"#00a32a":"#757575",color:"#fff",fontSize:"12px",textTransform:"capitalize"}},e.status))))))))))},d=()=>{const[e,t]=(0,r.useState)([]),[l,n]=(0,r.useState)(!0),[o,m]=(0,r.useState)(null),[u,i]=(0,r.useState)(!1),[d,E]=(0,r.useState)({subject:"",description:"",priority:"medium",status:"open"});(0,r.useEffect)(()=>{_()},[]);const _=async()=>{n(!0),m(null);try{const e=await s()({path:"/wp-erp/v1/helpdesk/tickets"});t(e)}catch(e){m(e.message||(0,c.__)("Failed to fetch tickets","wp-erp"))}finally{n(!1)}};return(0,a.createElement)("div",{className:"wp-erp-helpdesk",style:{padding:"16px"}},o&&(0,a.createElement)(p.Notice,{status:"error",isDismissible:!1,onRemove:()=>m(null)},o),(0,a.createElement)(p.Card,{style:{marginBottom:"24px"}},(0,a.createElement)(p.CardHeader,null,(0,a.createElement)("h2",{style:{margin:0}},(0,c.__)("Create New Ticket","wp-erp"))),(0,a.createElement)(p.CardBody,null,(0,a.createElement)("form",{onSubmit:async e=>{e.preventDefault(),i(!0),m(null);try{await s()({path:"/wp-erp/v1/helpdesk/tickets",method:"POST",data:d}),E({subject:"",description:"",priority:"medium",status:"open"}),_()}catch(e){m(e.message||(0,c.__)("Failed to create ticket","wp-erp"))}finally{i(!1)}}},(0,a.createElement)(p.Flex,{direction:"column",gap:4},(0,a.createElement)(p.FlexBlock,null,(0,a.createElement)(p.TextControl,{label:(0,c.__)("Subject","wp-erp"),value:d.subject,onChange:e=>E({...d,subject:e}),required:!0})),(0,a.createElement)(p.FlexBlock,null,(0,a.createElement)(p.TextareaControl,{label:(0,c.__)("Description","wp-erp"),value:d.description,onChange:e=>E({...d,description:e}),required:!0,rows:6})),(0,a.createElement)(p.FlexBlock,null,(0,a.createElement)(p.SelectControl,{label:(0,c.__)("Priority","wp-erp"),value:d.priority,options:[{label:(0,c.__)("Low","wp-erp"),value:"low"},{label:(0,c.__)("Medium","wp-erp"),value:"medium"},{label:(0,c.__)("High","wp-erp"),value:"high"},{label:(0,c.__)("Urgent","wp-erp"),value:"urgent"}],onChange:e=>E({...d,priority:e})})),(0,a.createElement)(p.Flex,{justify:"flex-start"},(0,a.createElement)(p.Button,{variant:"primary",type:"submit",isBusy:u},(0,c.__)("Create Ticket","wp-erp"))))))),(0,a.createElement)(p.Card,null,(0,a.createElement)(p.CardHeader,null,(0,a.createElement)("h2",{style:{margin:0}},(0,c.__)("Tickets","wp-erp"))),(0,a.createElement)(p.CardBody,null,l?(0,a.createElement)(p.Flex,{justify:"center",style:{padding:"32px"}},(0,a.createElement)(p.Spinner,null)):0===e.length?(0,a.createElement)("p",{style:{padding:"16px",textAlign:"center",color:"#757575"}},(0,c.__)("No tickets found.","wp-erp")):(0,a.createElement)("div",{style:{overflowX:"auto"}},(0,a.createElement)("table",{className:"wp-list-table widefat fixed striped"},(0,a.createElement)("thead",null,(0,a.createElement)("tr",null,(0,a.createElement)("th",null,(0,c.__)("Ticket No","wp-erp")),(0,a.createElement)("th",null,(0,c.__)("Subject","wp-erp")),(0,a.createElement)("th",null,(0,c.__)("Priority","wp-erp")),(0,a.createElement)("th",null,(0,c.__)("Status","wp-erp")),(0,a.createElement)("th",null,(0,c.__)("Created","wp-erp")))),(0,a.createElement)("tbody",null,e.map(e=>(0,a.createElement)("tr",{key:e.id},(0,a.createElement)("td",null,(0,a.createElement)("strong",null,e.ticket_no)),(0,a.createElement)("td",null,e.subject),(0,a.createElement)("td",null,(0,a.createElement)("span",{style:{padding:"4px 8px",borderRadius:"2px",backgroundColor:"urgent"===e.priority?"#d63638":"high"===e.priority?"#dba617":"medium"===e.priority?"#2271b1":"#00a32a",color:"#fff",fontSize:"12px",textTransform:"capitalize"}},e.priority)),(0,a.createElement)("td",null,(0,a.createElement)("span",{style:{padding:"4px 8px",borderRadius:"2px",backgroundColor:"open"===e.status?"#d63638":"closed"===e.status?"#757575":"#00a32a",color:"#fff",fontSize:"12px",textTransform:"capitalize"}},e.status)),(0,a.createElement)("td",null,e.created_at)))))))))},E=({view:e="list"})=>{const[t,l]=(0,r.useState)([]),[n,o]=(0,r.useState)(!0),[m,u]=(0,r.useState)(null),[i,d]=(0,r.useState)(!1),[E,_]=(0,r.useState)({voucher_type:"payment",date:(new Date).toISOString().split("T")[0],party_name:"",amount:"",description:"",status:"draft"});(0,r.useEffect)(()=>{"list"===e&&w()},[e]);const w=async()=>{o(!0),u(null);try{const e=await s()({path:"/wp-erp/v1/vouchers"});l(e)}catch(e){u(e.message||(0,c.__)("Failed to fetch vouchers","wp-erp"))}finally{o(!1)}};return"create"===e?(0,a.createElement)("div",{className:"wp-erp-vouchers",style:{padding:"16px"}},m&&(0,a.createElement)(p.Notice,{status:"error",isDismissible:!1,onRemove:()=>u(null)},m),(0,a.createElement)(p.Card,null,(0,a.createElement)(p.CardHeader,null,(0,a.createElement)("h2",{style:{margin:0}},(0,c.__)("Create Voucher","wp-erp"))),(0,a.createElement)(p.CardBody,null,(0,a.createElement)("form",{onSubmit:async t=>{t.preventDefault(),d(!0),u(null);try{await s()({path:"/wp-erp/v1/vouchers",method:"POST",data:E}),_({voucher_type:"payment",date:(new Date).toISOString().split("T")[0],party_name:"",amount:"",description:"",status:"draft"}),"create"===e?window.location.href="admin.php?page=wp-erp-vouchers":w()}catch(e){u(e.message||(0,c.__)("Failed to create voucher","wp-erp"))}finally{d(!1)}}},(0,a.createElement)(p.Flex,{direction:"column",gap:4},(0,a.createElement)(p.Flex,null,(0,a.createElement)(p.FlexBlock,null,(0,a.createElement)(p.SelectControl,{label:(0,c.__)("Voucher Type","wp-erp"),value:E.voucher_type,options:[{label:(0,c.__)("Payment","wp-erp"),value:"payment"},{label:(0,c.__)("Receipt","wp-erp"),value:"receipt"},{label:(0,c.__)("Journal","wp-erp"),value:"journal"}],onChange:e=>_({...E,voucher_type:e}),required:!0})),(0,a.createElement)(p.FlexBlock,null,(0,a.createElement)(p.TextControl,{label:(0,c.__)("Date","wp-erp"),type:"date",value:E.date,onChange:e=>_({...E,date:e}),required:!0}))),(0,a.createElement)(p.FlexBlock,null,(0,a.createElement)(p.TextControl,{label:(0,c.__)("Party Name","wp-erp"),value:E.party_name,onChange:e=>_({...E,party_name:e})})),(0,a.createElement)(p.FlexBlock,null,(0,a.createElement)(p.TextControl,{label:(0,c.__)("Amount","wp-erp"),type:"number",step:"0.01",value:E.amount,onChange:e=>_({...E,amount:e}),required:!0})),(0,a.createElement)(p.FlexBlock,null,(0,a.createElement)(p.TextareaControl,{label:(0,c.__)("Description","wp-erp"),value:E.description,onChange:e=>_({...E,description:e}),rows:4})),(0,a.createElement)(p.Flex,{justify:"flex-start"},(0,a.createElement)(p.Button,{variant:"primary",type:"submit",isBusy:i},(0,c.__)("Create Voucher","wp-erp")))))))):(0,a.createElement)("div",{className:"wp-erp-vouchers",style:{padding:"16px"}},m&&(0,a.createElement)(p.Notice,{status:"error",isDismissible:!1,onRemove:()=>u(null)},m),(0,a.createElement)(p.Card,null,(0,a.createElement)(p.CardHeader,null,(0,a.createElement)(p.Flex,{justify:"space-between",align:"center"},(0,a.createElement)("h2",{style:{margin:0}},(0,c.__)("Vouchers","wp-erp")),(0,a.createElement)(p.Button,{variant:"primary",href:"admin.php?page=wp-erp-vouchers-create"},(0,c.__)("Create Voucher","wp-erp")))),(0,a.createElement)(p.CardBody,null,n?(0,a.createElement)(p.Flex,{justify:"center",style:{padding:"32px"}},(0,a.createElement)(p.Spinner,null)):0===t.length?(0,a.createElement)("p",{style:{padding:"16px",textAlign:"center",color:"#757575"}},(0,c.__)("No vouchers found.","wp-erp")):(0,a.createElement)("div",{style:{overflowX:"auto"}},(0,a.createElement)("table",{className:"wp-list-table widefat fixed striped"},(0,a.createElement)("thead",null,(0,a.createElement)("tr",null,(0,a.createElement)("th",null,(0,c.__)("Voucher No","wp-erp")),(0,a.createElement)("th",null,(0,c.__)("Type","wp-erp")),(0,a.createElement)("th",null,(0,c.__)("Date","wp-erp")),(0,a.createElement)("th",null,(0,c.__)("Party Name","wp-erp")),(0,a.createElement)("th",null,(0,c.__)("Amount","wp-erp")),(0,a.createElement)("th",null,(0,c.__)("Status","wp-erp")))),(0,a.createElement)("tbody",null,t.map(e=>(0,a.createElement)("tr",{key:e.id},(0,a.createElement)("td",null,(0,a.createElement)("strong",null,e.voucher_no)),(0,a.createElement)("td",null,e.voucher_type),(0,a.createElement)("td",null,e.date),(0,a.createElement)("td",null,e.party_name||"-"),(0,a.createElement)("td",null,(0,a.createElement)("strong",null,e.amount)),(0,a.createElement)("td",null,(0,a.createElement)("span",{style:{padding:"4px 8px",borderRadius:"2px",backgroundColor:"approved"===e.status?"#00a32a":"draft"===e.status?"#757575":"#dba617",color:"#fff",fontSize:"12px",textTransform:"capitalize"}},e.status))))))))))},_=({view:e="list"})=>{const[t,l]=(0,r.useState)([]),[n,o]=(0,r.useState)([]),[m,u]=(0,r.useState)(!0),[i,d]=(0,r.useState)(null),[E,_]=(0,r.useState)(!1),[w,y]=(0,r.useState)({contact_id:"",invoice_date:(new Date).toISOString().split("T")[0],due_date:"",subtotal:"",tax_amount:"",total_amount:"",notes:"",status:"draft"});(0,r.useEffect)(()=>{"list"===e&&h(),x()},[e]);const h=async()=>{u(!0),d(null);try{const e=await s()({path:"/wp-erp/v1/invoices"});l(e)}catch(e){d(e.message||(0,c.__)("Failed to fetch invoices","wp-erp"))}finally{u(!1)}},x=async()=>{try{const e=await s()({path:"/wp-erp/v1/crm/contacts"});o(e)}catch(e){}};return"create"===e?(0,a.createElement)("div",{className:"wp-erp-invoices",style:{padding:"16px"}},i&&(0,a.createElement)(p.Notice,{status:"error",isDismissible:!1,onRemove:()=>d(null)},i),(0,a.createElement)(p.Card,null,(0,a.createElement)(p.CardHeader,null,(0,a.createElement)("h2",{style:{margin:0}},(0,c.__)("Create Invoice","wp-erp"))),(0,a.createElement)(p.CardBody,null,(0,a.createElement)("form",{onSubmit:async t=>{t.preventDefault(),_(!0),d(null);try{await s()({path:"/wp-erp/v1/invoices",method:"POST",data:w}),"create"===e?window.location.href="admin.php?page=wp-erp-invoices":h()}catch(e){d(e.message||(0,c.__)("Failed to create invoice","wp-erp"))}finally{_(!1)}}},(0,a.createElement)(p.Flex,{direction:"column",gap:4},(0,a.createElement)(p.Flex,null,(0,a.createElement)(p.FlexBlock,null,(0,a.createElement)(p.TextControl,{label:(0,c.__)("Invoice Date","wp-erp"),type:"date",value:w.invoice_date,onChange:e=>y({...w,invoice_date:e}),required:!0})),(0,a.createElement)(p.FlexBlock,null,(0,a.createElement)(p.TextControl,{label:(0,c.__)("Due Date","wp-erp"),type:"date",value:w.due_date,onChange:e=>y({...w,due_date:e})}))),(0,a.createElement)(p.FlexBlock,null,(0,a.createElement)(p.TextControl,{label:(0,c.__)("Subtotal","wp-erp"),type:"number",step:"0.01",value:w.subtotal,onChange:e=>{const t=parseFloat(e)||0,l=parseFloat(w.tax_amount)||0;y({...w,subtotal:e,total_amount:(t+l).toFixed(2)})}})),(0,a.createElement)(p.FlexBlock,null,(0,a.createElement)(p.TextControl,{label:(0,c.__)("Tax Amount","wp-erp"),type:"number",step:"0.01",value:w.tax_amount,onChange:e=>{const t=parseFloat(w.subtotal)||0,l=parseFloat(e)||0;y({...w,tax_amount:e,total_amount:(t+l).toFixed(2)})}})),(0,a.createElement)(p.FlexBlock,null,(0,a.createElement)(p.TextControl,{label:(0,c.__)("Total Amount","wp-erp"),type:"number",step:"0.01",value:w.total_amount,readOnly:!0})),(0,a.createElement)(p.FlexBlock,null,(0,a.createElement)(p.TextareaControl,{label:(0,c.__)("Notes","wp-erp"),value:w.notes,onChange:e=>y({...w,notes:e}),rows:4})),(0,a.createElement)(p.Flex,{justify:"flex-start"},(0,a.createElement)(p.Button,{variant:"primary",type:"submit",isBusy:E},(0,c.__)("Create Invoice","wp-erp")))))))):(0,a.createElement)("div",{className:"wp-erp-invoices",style:{padding:"16px"}},i&&(0,a.createElement)(p.Notice,{status:"error",isDismissible:!1,onRemove:()=>d(null)},i),(0,a.createElement)(p.Card,null,(0,a.createElement)(p.CardHeader,null,(0,a.createElement)(p.Flex,{justify:"space-between",align:"center"},(0,a.createElement)("h2",{style:{margin:0}},(0,c.__)("Invoices","wp-erp")),(0,a.createElement)(p.Button,{variant:"primary",href:"admin.php?page=wp-erp-invoices-create"},(0,c.__)("Create Invoice","wp-erp")))),(0,a.createElement)(p.CardBody,null,m?(0,a.createElement)(p.Flex,{justify:"center",style:{padding:"32px"}},(0,a.createElement)(p.Spinner,null)):0===t.length?(0,a.createElement)("p",{style:{padding:"16px",textAlign:"center",color:"#757575"}},(0,c.__)("No invoices found.","wp-erp")):(0,a.createElement)("div",{style:{overflowX:"auto"}},(0,a.createElement)("table",{className:"wp-list-table widefat fixed striped"},(0,a.createElement)("thead",null,(0,a.createElement)("tr",null,(0,a.createElement)("th",null,(0,c.__)("Invoice No","wp-erp")),(0,a.createElement)("th",null,(0,c.__)("Date","wp-erp")),(0,a.createElement)("th",null,(0,c.__)("Due Date","wp-erp")),(0,a.createElement)("th",null,(0,c.__)("Total Amount","wp-erp")),(0,a.createElement)("th",null,(0,c.__)("Status","wp-erp")))),(0,a.createElement)("tbody",null,t.map(e=>(0,a.createElement)("tr",{key:e.id},(0,a.createElement)("td",null,(0,a.createElement)("strong",null,e.invoice_no)),(0,a.createElement)("td",null,e.invoice_date),(0,a.createElement)("td",null,e.due_date||"-"),(0,a.createElement)("td",null,(0,a.createElement)("strong",null,e.total_amount)),(0,a.createElement)("td",null,(0,a.createElement)("span",{style:{padding:"4px 8px",borderRadius:"2px",backgroundColor:"paid"===e.status?"#00a32a":"draft"===e.status?"#757575":"#dba617",color:"#fff",fontSize:"12px",textTransform:"capitalize"}},e.status))))))))))},w=({view:e="list"})=>{const[t,l]=(0,r.useState)([]),[n,o]=(0,r.useState)(!0),[m,u]=(0,r.useState)(null),[i,d]=(0,r.useState)(!1),[E,_]=(0,r.useState)({expense_type:"general",date:(new Date).toISOString().split("T")[0],amount:"",description:"",category:"",payment_method:"cash",status:"pending"});(0,r.useEffect)(()=>{"list"===e&&w()},[e]);const w=async()=>{o(!0),u(null);try{const e=await s()({path:"/wp-erp/v1/expenses"});l(e)}catch(e){u(e.message||(0,c.__)("Failed to fetch expenses","wp-erp"))}finally{o(!1)}};return"create"===e?(0,a.createElement)("div",{className:"wp-erp-expenses",style:{padding:"16px"}},m&&(0,a.createElement)(p.Notice,{status:"error",isDismissible:!1,onRemove:()=>u(null)},m),(0,a.createElement)(p.Card,null,(0,a.createElement)(p.CardHeader,null,(0,a.createElement)("h2",{style:{margin:0}},(0,c.__)("Add Expense","wp-erp"))),(0,a.createElement)(p.CardBody,null,(0,a.createElement)("form",{onSubmit:async t=>{t.preventDefault(),d(!0),u(null);try{await s()({path:"/wp-erp/v1/expenses",method:"POST",data:E}),_({expense_type:"general",date:(new Date).toISOString().split("T")[0],amount:"",description:"",category:"",payment_method:"cash",status:"pending"}),"create"===e?window.location.href="admin.php?page=wp-erp-expenses":w()}catch(e){u(e.message||(0,c.__)("Failed to create expense","wp-erp"))}finally{d(!1)}}},(0,a.createElement)(p.Flex,{direction:"column",gap:4},(0,a.createElement)(p.Flex,null,(0,a.createElement)(p.FlexBlock,null,(0,a.createElement)(p.SelectControl,{label:(0,c.__)("Expense Type","wp-erp"),value:E.expense_type,options:[{label:(0,c.__)("General","wp-erp"),value:"general"},{label:(0,c.__)("Travel","wp-erp"),value:"travel"},{label:(0,c.__)("Meals","wp-erp"),value:"meals"},{label:(0,c.__)("Office Supplies","wp-erp"),value:"office_supplies"}],onChange:e=>_({...E,expense_type:e})})),(0,a.createElement)(p.FlexBlock,null,(0,a.createElement)(p.TextControl,{label:(0,c.__)("Date","wp-erp"),type:"date",value:E.date,onChange:e=>_({...E,date:e}),required:!0}))),(0,a.createElement)(p.Flex,null,(0,a.createElement)(p.FlexBlock,null,(0,a.createElement)(p.TextControl,{label:(0,c.__)("Amount","wp-erp"),type:"number",step:"0.01",value:E.amount,onChange:e=>_({...E,amount:e}),required:!0})),(0,a.createElement)(p.FlexBlock,null,(0,a.createElement)(p.TextControl,{label:(0,c.__)("Category","wp-erp"),value:E.category,onChange:e=>_({...E,category:e})}))),(0,a.createElement)(p.Flex,null,(0,a.createElement)(p.FlexBlock,null,(0,a.createElement)(p.SelectControl,{label:(0,c.__)("Payment Method","wp-erp"),value:E.payment_method,options:[{label:(0,c.__)("Cash","wp-erp"),value:"cash"},{label:(0,c.__)("Bank Transfer","wp-erp"),value:"bank_transfer"},{label:(0,c.__)("Credit Card","wp-erp"),value:"credit_card"},{label:(0,c.__)("Cheque","wp-erp"),value:"cheque"}],onChange:e=>_({...E,payment_method:e})})),(0,a.createElement)(p.FlexBlock,null,(0,a.createElement)(p.SelectControl,{label:(0,c.__)("Status","wp-erp"),value:E.status,options:[{label:(0,c.__)("Pending","wp-erp"),value:"pending"},{label:(0,c.__)("Approved","wp-erp"),value:"approved"},{label:(0,c.__)("Rejected","wp-erp"),value:"rejected"}],onChange:e=>_({...E,status:e})}))),(0,a.createElement)(p.FlexBlock,null,(0,a.createElement)(p.TextareaControl,{label:(0,c.__)("Description","wp-erp"),value:E.description,onChange:e=>_({...E,description:e}),rows:4})),(0,a.createElement)(p.Flex,{justify:"flex-start"},(0,a.createElement)(p.Button,{variant:"primary",type:"submit",isBusy:i},(0,c.__)("Add Expense","wp-erp")))))))):(0,a.createElement)("div",{className:"wp-erp-expenses",style:{padding:"16px"}},m&&(0,a.createElement)(p.Notice,{status:"error",isDismissible:!1,onRemove:()=>u(null)},m),(0,a.createElement)(p.Card,null,(0,a.createElement)(p.CardHeader,null,(0,a.createElement)(p.Flex,{justify:"space-between",align:"center"},(0,a.createElement)("h2",{style:{margin:0}},(0,c.__)("Expenses","wp-erp")),(0,a.createElement)(p.Button,{variant:"primary",href:"admin.php?page=wp-erp-expenses-create"},(0,c.__)("Add Expense","wp-erp")))),(0,a.createElement)(p.CardBody,null,n?(0,a.createElement)(p.Flex,{justify:"center",style:{padding:"32px"}},(0,a.createElement)(p.Spinner,null)):0===t.length?(0,a.createElement)("p",{style:{padding:"16px",textAlign:"center",color:"#757575"}},(0,c.__)("No expenses found.","wp-erp")):(0,a.createElement)("div",{style:{overflowX:"auto"}},(0,a.createElement)("table",{className:"wp-list-table widefat fixed striped"},(0,a.createElement)("thead",null,(0,a.createElement)("tr",null,(0,a.createElement)("th",null,(0,c.__)("Expense No","wp-erp")),(0,a.createElement)("th",null,(0,c.__)("Type","wp-erp")),(0,a.createElement)("th",null,(0,c.__)("Date","wp-erp")),(0,a.createElement)("th",null,(0,c.__)("Amount","wp-erp")),(0,a.createElement)("th",null,(0,c.__)("Category","wp-erp")),(0,a.createElement)("th",null,(0,c.__)("Status","wp-erp")))),(0,a.createElement)("tbody",null,t.map(e=>(0,a.createElement)("tr",{key:e.id},(0,a.createElement)("td",null,(0,a.createElement)("strong",null,e.expense_no)),(0,a.createElement)("td",null,e.expense_type),(0,a.createElement)("td",null,e.date),(0,a.createElement)("td",null,(0,a.createElement)("strong",null,e.amount)),(0,a.createElement)("td",null,e.category||"-"),(0,a.createElement)("td",null,(0,a.createElement)("span",{style:{padding:"4px 8px",borderRadius:"2px",backgroundColor:"approved"===e.status?"#00a32a":"rejected"===e.status?"#d63638":"#dba617",color:"#fff",fontSize:"12px",textTransform:"capitalize"}},e.status))))))))))},y=({view:e="list"})=>{const[t,l]=(0,r.useState)([]),[n,o]=(0,r.useState)([]),[m,u]=(0,r.useState)(!0),[i,d]=(0,r.useState)(null),[E,_]=(0,r.useState)(!1),[w,y]=(0,r.useState)({employee_id:"",contact_id:"",issue_date:(new Date).toISOString().split("T")[0],valid_from:(new Date).toISOString().split("T")[0],valid_to:"",meals_per_day:"1",total_meals:"",status:"active",notes:""});(0,r.useEffect)(()=>{"list"===e&&h(),x()},[e]);const h=async()=>{u(!0),d(null);try{const e=await s()({path:"/wp-erp/v1/food-pass"});l(e)}catch(e){d(e.message||(0,c.__)("Failed to fetch food passes","wp-erp"))}finally{u(!1)}},x=async()=>{try{const e=await s()({path:"/wp-erp/v1/hr/employees"});o(e)}catch(e){}};return"create"===e?(0,a.createElement)("div",{className:"wp-erp-food-pass",style:{padding:"16px"}},i&&(0,a.createElement)(p.Notice,{status:"error",isDismissible:!1,onRemove:()=>d(null)},i),(0,a.createElement)(p.Card,null,(0,a.createElement)(p.CardHeader,null,(0,a.createElement)("h2",{style:{margin:0}},(0,c.__)("Create Food Pass","wp-erp"))),(0,a.createElement)(p.CardBody,null,(0,a.createElement)("form",{onSubmit:async t=>{t.preventDefault(),_(!0),d(null);try{await s()({path:"/wp-erp/v1/food-pass",method:"POST",data:w}),"create"===e?window.location.href="admin.php?page=wp-erp-food-pass":h()}catch(e){d(e.message||(0,c.__)("Failed to create food pass","wp-erp"))}finally{_(!1)}}},(0,a.createElement)(p.Flex,{direction:"column",gap:4},(0,a.createElement)(p.Flex,null,(0,a.createElement)(p.FlexBlock,null,(0,a.createElement)(p.TextControl,{label:(0,c.__)("Issue Date","wp-erp"),type:"date",value:w.issue_date,onChange:e=>y({...w,issue_date:e}),required:!0})),(0,a.createElement)(p.FlexBlock,null,(0,a.createElement)(p.TextControl,{label:(0,c.__)("Valid From","wp-erp"),type:"date",value:w.valid_from,onChange:e=>y({...w,valid_from:e}),required:!0})),(0,a.createElement)(p.FlexBlock,null,(0,a.createElement)(p.TextControl,{label:(0,c.__)("Valid To","wp-erp"),type:"date",value:w.valid_to,onChange:e=>y({...w,valid_to:e}),required:!0}))),(0,a.createElement)(p.Flex,null,(0,a.createElement)(p.FlexBlock,null,(0,a.createElement)(p.TextControl,{label:(0,c.__)("Meals Per Day","wp-erp"),type:"number",value:w.meals_per_day,onChange:e=>y({...w,meals_per_day:e}),min:"1"})),(0,a.createElement)(p.FlexBlock,null,(0,a.createElement)(p.TextControl,{label:(0,c.__)("Total Meals","wp-erp"),type:"number",value:w.total_meals,onChange:e=>y({...w,total_meals:e})})),(0,a.createElement)(p.FlexBlock,null,(0,a.createElement)(p.SelectControl,{label:(0,c.__)("Status","wp-erp"),value:w.status,options:[{label:(0,c.__)("Active","wp-erp"),value:"active"},{label:(0,c.__)("Expired","wp-erp"),value:"expired"},{label:(0,c.__)("Cancelled","wp-erp"),value:"cancelled"}],onChange:e=>y({...w,status:e})}))),(0,a.createElement)(p.FlexBlock,null,(0,a.createElement)(p.TextareaControl,{label:(0,c.__)("Notes","wp-erp"),value:w.notes,onChange:e=>y({...w,notes:e}),rows:4})),(0,a.createElement)(p.Flex,{justify:"flex-start"},(0,a.createElement)(p.Button,{variant:"primary",type:"submit",isBusy:E},(0,c.__)("Create Food Pass","wp-erp")))))))):(0,a.createElement)("div",{className:"wp-erp-food-pass",style:{padding:"16px"}},i&&(0,a.createElement)(p.Notice,{status:"error",isDismissible:!1,onRemove:()=>d(null)},i),(0,a.createElement)(p.Card,null,(0,a.createElement)(p.CardHeader,null,(0,a.createElement)(p.Flex,{justify:"space-between",align:"center"},(0,a.createElement)("h2",{style:{margin:0}},(0,c.__)("Food Passes","wp-erp")),(0,a.createElement)(p.Button,{variant:"primary",href:"admin.php?page=wp-erp-food-pass-create"},(0,c.__)("Create Food Pass","wp-erp")))),(0,a.createElement)(p.CardBody,null,m?(0,a.createElement)(p.Flex,{justify:"center",style:{padding:"32px"}},(0,a.createElement)(p.Spinner,null)):0===t.length?(0,a.createElement)("p",{style:{padding:"16px",textAlign:"center",color:"#757575"}},(0,c.__)("No food passes found.","wp-erp")):(0,a.createElement)("div",{style:{overflowX:"auto"}},(0,a.createElement)("table",{className:"wp-list-table widefat fixed striped"},(0,a.createElement)("thead",null,(0,a.createElement)("tr",null,(0,a.createElement)("th",null,(0,c.__)("Pass No","wp-erp")),(0,a.createElement)("th",null,(0,c.__)("Issue Date","wp-erp")),(0,a.createElement)("th",null,(0,c.__)("Valid From","wp-erp")),(0,a.createElement)("th",null,(0,c.__)("Valid To","wp-erp")),(0,a.createElement)("th",null,(0,c.__)("Total Meals","wp-erp")),(0,a.createElement)("th",null,(0,c.__)("Used Meals","wp-erp")),(0,a.createElement)("th",null,(0,c.__)("Status","wp-erp")))),(0,a.createElement)("tbody",null,t.map(e=>(0,a.createElement)("tr",{key:e.id},(0,a.createElement)("td",null,(0,a.createElement)("strong",null,e.pass_no)),(0,a.createElement)("td",null,e.issue_date),(0,a.createElement)("td",null,e.valid_from),(0,a.createElement)("td",null,e.valid_to),(0,a.createElement)("td",null,e.total_meals),(0,a.createElement)("td",null,e.used_meals),(0,a.createElement)("td",null,(0,a.createElement)("span",{style:{padding:"4px 8px",borderRadius:"2px",backgroundColor:"active"===e.status?"#00a32a":"expired"===e.status?"#757575":"#d63638",color:"#fff",fontSize:"12px",textTransform:"capitalize"}},e.status))))))))))};function h(){const e=document.getElementById("wp-erp-crm-root");e&&(0,n.H)(e).render((0,a.createElement)(m,null));const t=document.getElementById("wp-erp-accounting-root");t&&(0,n.H)(t).render((0,a.createElement)(u,null));const l=document.getElementById("wp-erp-accounting-transactions-root");l&&(0,n.H)(l).render((0,a.createElement)(u,{view:"transactions"}));const r=document.getElementById("wp-erp-hr-root");r&&(0,n.H)(r).render((0,a.createElement)(i,null));const c=document.getElementById("wp-erp-hr-leaves-root");c&&(0,n.H)(c).render((0,a.createElement)(i,{view:"leaves"}));const p=document.getElementById("wp-erp-helpdesk-root");p&&(0,n.H)(p).render((0,a.createElement)(d,null));const o=document.getElementById("wp-erp-vouchers-root");o&&(0,n.H)(o).render((0,a.createElement)(E,null));const s=document.getElementById("wp-erp-vouchers-create-root");s&&(0,n.H)(s).render((0,a.createElement)(E,{view:"create"}));const h=document.getElementById("wp-erp-invoices-root");h&&(0,n.H)(h).render((0,a.createElement)(_,null));const x=document.getElementById("wp-erp-invoices-create-root");x&&(0,n.H)(x).render((0,a.createElement)(_,{view:"create"}));const v=document.getElementById("wp-erp-expenses-root");v&&(0,n.H)(v).render((0,a.createElement)(w,null));const g=document.getElementById("wp-erp-expenses-create-root");g&&(0,n.H)(g).render((0,a.createElement)(w,{view:"create"}));const f=document.getElementById("wp-erp-food-pass-root");f&&(0,n.H)(f).render((0,a.createElement)(y,null));const b=document.getElementById("wp-erp-food-pass-create-root");b&&(0,n.H)(b).render((0,a.createElement)(y,{view:"create"}))}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",h):h()})();