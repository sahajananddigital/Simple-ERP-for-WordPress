(()=>{"use strict";var e={338:(e,t,s)=>{var n=s(795);t.H=n.createRoot,n.hydrateRoot},795:e=>{e.exports=window.ReactDOM}},t={};function s(n){var r=t[n];if(void 0!==r)return r.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,s),a.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var n=s(338);const r=window.wp.element,a=window.wp.i18n,l=window.wp.components,i=window.wp.apiFetch;var d=s.n(i);const o=window.ReactJSXRuntime,c=()=>{const[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)(!0),[i,c]=(0,r.useState)(null),[p,x]=(0,r.useState)(!1),[h,u]=(0,r.useState)({first_name:"",last_name:"",email:"",phone:"",company:"",status:"lead",type:"contact"});(0,r.useEffect)(()=>{console.log("CRMApp mounted"),j()},[]);const j=async()=>{console.log("Fetching contacts..."),n(!0),c(null);try{const e=await d()({path:"/wp-erp/v1/crm/contacts"});t(e)}catch(e){c(e.message||(0,a.__)("Failed to fetch contacts","wp-erp"))}finally{n(!1)}},_=async e=>{e.preventDefault(),x(!0),c(null);try{await d()({path:"/wp-erp/v1/crm/contacts",method:"POST",data:h}),u({first_name:"",last_name:"",email:"",phone:"",company:"",status:"lead",type:"contact"}),j()}catch(e){c(e.message||(0,a.__)("Failed to create contact","wp-erp"))}finally{x(!1)}},m=e=>{switch(e){case"customer":return"#00a32a";case"opportunity":return"#2271b1";default:return"#dba617"}};return(0,o.jsxs)("div",{className:"wp-erp-crm",style:{padding:"16px"},children:[i&&(0,o.jsx)(l.Notice,{status:"error",isDismissible:!1,onRemove:()=>c(null),children:i}),(0,o.jsxs)(l.Card,{children:[(0,o.jsx)(l.CardHeader,{children:(0,o.jsx)("h2",{style:{margin:0},children:(0,a.__)("CRM Management","wp-erp")})}),(0,o.jsx)(l.CardBody,{children:(0,o.jsx)(l.TabPanel,{className:"wp-erp-crm-tabs",activeClass:"is-active",initialTabName:"contacts",tabs:[{name:"contacts",title:(0,a.__)("Contacts","wp-erp"),className:"tab-contacts"}],children:t=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(l.Card,{style:{marginBottom:"24px"},children:[(0,o.jsx)(l.CardHeader,{children:(0,o.jsx)("h2",{style:{margin:0},children:(0,a.__)("Add New Contact","wp-erp")})}),(0,o.jsx)(l.CardBody,{children:(0,o.jsx)("form",{onSubmit:_,children:(0,o.jsxs)(l.Flex,{direction:"column",gap:4,children:[(0,o.jsxs)(l.Flex,{children:[(0,o.jsx)(l.FlexBlock,{children:(0,o.jsx)(l.TextControl,{label:(0,a.__)("First Name","wp-erp"),value:h.first_name,onChange:e=>u({...h,first_name:e}),required:!0})}),(0,o.jsx)(l.FlexBlock,{children:(0,o.jsx)(l.TextControl,{label:(0,a.__)("Last Name","wp-erp"),value:h.last_name,onChange:e=>u({...h,last_name:e}),required:!0})})]}),(0,o.jsxs)(l.Flex,{children:[(0,o.jsx)(l.FlexBlock,{children:(0,o.jsx)(l.TextControl,{label:(0,a.__)("Email","wp-erp"),type:"email",value:h.email,onChange:e=>u({...h,email:e})})}),(0,o.jsx)(l.FlexBlock,{children:(0,o.jsx)(l.TextControl,{label:(0,a.__)("Phone","wp-erp"),value:h.phone,onChange:e=>u({...h,phone:e})})})]}),(0,o.jsxs)(l.Flex,{children:[(0,o.jsx)(l.FlexBlock,{children:(0,o.jsx)(l.TextControl,{label:(0,a.__)("Company","wp-erp"),value:h.company,onChange:e=>u({...h,company:e})})}),(0,o.jsx)(l.FlexBlock,{children:(0,o.jsx)(l.SelectControl,{label:(0,a.__)("Status","wp-erp"),value:h.status,options:[{label:(0,a.__)("Lead","wp-erp"),value:"lead"},{label:(0,a.__)("Customer","wp-erp"),value:"customer"},{label:(0,a.__)("Opportunity","wp-erp"),value:"opportunity"}],onChange:e=>u({...h,status:e})})})]}),(0,o.jsx)(l.Flex,{justify:"flex-start",children:(0,o.jsx)(l.Button,{variant:"primary",type:"submit",isBusy:p,children:(0,a.__)("Add Contact","wp-erp")})})]})})})]}),(0,o.jsxs)(l.Card,{children:[(0,o.jsx)(l.CardHeader,{children:(0,o.jsx)("h2",{style:{margin:0},children:(0,a.__)("Contacts","wp-erp")})}),(0,o.jsx)(l.CardBody,{children:s?(0,o.jsx)(l.Flex,{justify:"center",style:{padding:"32px"},children:(0,o.jsx)(l.Spinner,{})}):0===e.length?(0,o.jsx)("p",{style:{padding:"16px",textAlign:"center",color:"#757575"},children:(0,a.__)("No contacts found.","wp-erp")}):(0,o.jsx)("div",{style:{overflowX:"auto"},children:(0,o.jsxs)("table",{className:"wp-list-table widefat fixed striped",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:(0,a.__)("Name","wp-erp")}),(0,o.jsx)("th",{children:(0,a.__)("Email","wp-erp")}),(0,o.jsx)("th",{children:(0,a.__)("Phone","wp-erp")}),(0,o.jsx)("th",{children:(0,a.__)("Company","wp-erp")}),(0,o.jsx)("th",{children:(0,a.__)("Status","wp-erp")})]})}),(0,o.jsx)("tbody",{children:e.map(e=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsxs)("strong",{children:[e.first_name," ",e.last_name]})}),(0,o.jsx)("td",{children:e.email||"-"}),(0,o.jsx)("td",{children:e.phone||"-"}),(0,o.jsx)("td",{children:e.company||"-"}),(0,o.jsx)("td",{children:(0,o.jsx)("span",{style:{padding:"4px 8px",borderRadius:"2px",backgroundColor:m(e.status),color:"#fff",fontSize:"12px",textTransform:"capitalize"},children:e.status})})]},e.id))})]})})})]})]})})})]})]})},p=({view:e="accounts"})=>{const[t,s]=(0,r.useState)([]),[n,i]=(0,r.useState)([]),[c,p]=(0,r.useState)(!0),[x,h]=(0,r.useState)(null),[u,j]=(0,r.useState)(null),[_,m]=(0,r.useState)("transactions"===e?"transactions":"accounts"),[y,w]=(0,r.useState)(!1),[g,f]=(0,r.useState)({voucher_no:"",type:"payment",date:(new Date).toISOString().split("T")[0],reference:"",total:"",description:""});(0,r.useEffect)(()=>{"accounts"===_?v():b()},[_]);const v=async()=>{p(!0),h(null);try{const e=await d()({path:"/wp-erp/v1/accounting/accounts"});s(e)}catch(e){h(e.message||(0,a.__)("Failed to fetch accounts","wp-erp"))}finally{p(!1)}},b=async()=>{p(!0),h(null);try{const e=await d()({path:"/wp-erp/v1/accounting/transactions"});i(e)}catch(e){h(e.message||(0,a.__)("Failed to fetch transactions","wp-erp"))}finally{p(!1)}},C=async e=>{e.preventDefault(),w(!0),h(null);try{await d()({path:"/wp-erp/v1/accounting/transactions",method:"POST",data:g}),f({voucher_no:"",type:"payment",date:(new Date).toISOString().split("T")[0],reference:"",total:"",description:""}),"create"===_?m("transactions"):b()}catch(e){h(e.message||(0,a.__)("Failed to create transaction","wp-erp"))}finally{w(!1)}};return(0,o.jsxs)("div",{className:"wp-erp-accounting",style:{padding:"16px"},children:[x&&(0,o.jsx)(l.Notice,{status:"error",isDismissible:!1,onRemove:()=>h(null),children:x}),(0,o.jsxs)(l.Card,{children:[(0,o.jsx)(l.CardHeader,{children:(0,o.jsx)("h2",{style:{margin:0},children:(0,a.__)("Accounting","wp-erp")})}),(0,o.jsx)(l.CardBody,{children:(0,o.jsx)(l.TabPanel,{className:"wp-erp-accounting-tabs",activeClass:"is-active",initialTabName:_,onSelect:e=>m(e),tabs:[{name:"accounts",title:(0,a.__)("Chart of Accounts","wp-erp"),className:"tab-accounts"},{name:"transactions",title:(0,a.__)("Transactions","wp-erp"),className:"tab-transactions"},{name:"create",title:(0,a.__)("Create Transaction","wp-erp"),className:"tab-create"}],children:e=>"accounts"===e.name?c?(0,o.jsx)(l.Flex,{justify:"center",style:{padding:"32px"},children:(0,o.jsx)(l.Spinner,{})}):0===t.length?(0,o.jsx)("p",{style:{padding:"16px",textAlign:"center",color:"#757575"},children:(0,a.__)("No accounts found.","wp-erp")}):(0,o.jsx)("div",{style:{overflowX:"auto"},children:(0,o.jsxs)("table",{className:"wp-list-table widefat fixed striped",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:(0,a.__)("Code","wp-erp")}),(0,o.jsx)("th",{children:(0,a.__)("Name","wp-erp")}),(0,o.jsx)("th",{children:(0,a.__)("Type","wp-erp")}),(0,o.jsx)("th",{children:(0,a.__)("Balance","wp-erp")})]})}),(0,o.jsx)("tbody",{children:t.map(e=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)("strong",{children:e.code})}),(0,o.jsx)("td",{children:e.name}),(0,o.jsx)("td",{children:e.type}),(0,o.jsx)("td",{children:(0,o.jsx)("strong",{children:e.balance})})]},e.id))})]})}):"transactions"===e.name?c?(0,o.jsx)(l.Flex,{justify:"center",style:{padding:"32px"},children:(0,o.jsx)(l.Spinner,{})}):0===n.length?(0,o.jsx)("p",{style:{padding:"16px",textAlign:"center",color:"#757575"},children:(0,a.__)("No transactions found.","wp-erp")}):(0,o.jsx)("div",{style:{overflowX:"auto"},children:(0,o.jsxs)("table",{className:"wp-list-table widefat fixed striped",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:(0,a.__)("Voucher No","wp-erp")}),(0,o.jsx)("th",{children:(0,a.__)("Type","wp-erp")}),(0,o.jsx)("th",{children:(0,a.__)("Date","wp-erp")}),(0,o.jsx)("th",{children:(0,a.__)("Reference","wp-erp")}),(0,o.jsx)("th",{children:(0,a.__)("Total","wp-erp")}),(0,o.jsx)("th",{children:(0,a.__)("Actions","wp-erp")})]})}),(0,o.jsx)("tbody",{children:n.map(e=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)("strong",{children:e.voucher_no})}),(0,o.jsx)("td",{children:e.type}),(0,o.jsx)("td",{children:e.date}),(0,o.jsx)("td",{children:e.reference||"-"}),(0,o.jsx)("td",{children:(0,o.jsx)("strong",{children:e.total})}),(0,o.jsx)("td",{children:(0,o.jsx)(l.Button,{variant:"secondary",onClick:()=>j(e),isSmall:!0,children:(0,a.__)("View","wp-erp")})})]},e.id))})]})}):(0,o.jsxs)(l.Card,{style:{marginBottom:"24px"},children:[(0,o.jsx)(l.CardHeader,{children:(0,o.jsx)("h2",{style:{margin:0},children:(0,a.__)("Create Transaction","wp-erp")})}),(0,o.jsx)(l.CardBody,{children:(0,o.jsx)("form",{onSubmit:C,children:(0,o.jsxs)(l.Flex,{direction:"column",gap:4,children:[(0,o.jsxs)(l.Flex,{children:[(0,o.jsx)(l.FlexBlock,{children:(0,o.jsx)(l.TextControl,{label:(0,a.__)("Voucher No","wp-erp"),value:g.voucher_no,onChange:e=>f({...g,voucher_no:e}),required:!0})}),(0,o.jsx)(l.FlexBlock,{children:(0,o.jsx)(l.SelectControl,{label:(0,a.__)("Type","wp-erp"),value:g.type,options:[{label:(0,a.__)("Payment","wp-erp"),value:"payment"},{label:(0,a.__)("Receipt","wp-erp"),value:"receipt"},{label:(0,a.__)("Journal","wp-erp"),value:"journal"}],onChange:e=>f({...g,type:e})})}),(0,o.jsx)(l.FlexBlock,{children:(0,o.jsx)(l.TextControl,{label:(0,a.__)("Date","wp-erp"),type:"date",value:g.date,onChange:e=>f({...g,date:e}),required:!0})})]}),(0,o.jsxs)(l.Flex,{children:[(0,o.jsx)(l.FlexBlock,{children:(0,o.jsx)(l.TextControl,{label:(0,a.__)("Reference","wp-erp"),value:g.reference,onChange:e=>f({...g,reference:e})})}),(0,o.jsx)(l.FlexBlock,{children:(0,o.jsx)(l.TextControl,{label:(0,a.__)("Total","wp-erp"),type:"number",step:"0.01",value:g.total,onChange:e=>f({...g,total:e}),required:!0})})]}),(0,o.jsx)(l.FlexBlock,{children:(0,o.jsx)(l.TextareaControl,{label:(0,a.__)("Description","wp-erp"),value:g.description,onChange:e=>f({...g,description:e}),rows:4})}),(0,o.jsx)(l.Flex,{justify:"flex-start",children:(0,o.jsx)(l.Button,{variant:"primary",type:"submit",isBusy:y,children:(0,a.__)("Create Transaction","wp-erp")})})]})})})]})})})]}),u&&(0,o.jsx)(l.Modal,{title:(0,a.__)("Transaction Details","wp-erp"),onRequestClose:()=>j(null),children:(0,o.jsxs)("div",{style:{padding:"16px"},children:[(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:(0,a.__)("Voucher No:","wp-erp")})," ",u.voucher_no]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:(0,a.__)("Type:","wp-erp")})," ",u.type]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:(0,a.__)("Date:","wp-erp")})," ",u.date]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:(0,a.__)("Reference:","wp-erp")})," ",u.reference||"-"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:(0,a.__)("Total:","wp-erp")})," ",u.total]}),(0,o.jsx)(l.Flex,{justify:"flex-end",style:{marginTop:"24px"},children:(0,o.jsx)(l.Button,{variant:"primary",onClick:()=>j(null),children:(0,a.__)("Close","wp-erp")})})]})})]})},x=({view:e="employees"})=>{const[t,s]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[c,p]=(0,r.useState)(null),[x,h]=(0,r.useState)(e);(0,r.useEffect)(()=>{"employees"===x&&u()},[x]);const u=async()=>{i(!0),p(null);try{const e=await d()({path:"/wp-erp/v1/hr/employees"});s(e)}catch(e){p(e.message||(0,a.__)("Failed to fetch employees","wp-erp"))}finally{i(!1)}};return(0,o.jsxs)("div",{className:"wp-erp-hr",style:{padding:"16px"},children:[c&&(0,o.jsx)(l.Notice,{status:"error",isDismissible:!1,onRemove:()=>p(null),children:c}),(0,o.jsxs)(l.Card,{children:[(0,o.jsx)(l.CardHeader,{children:(0,o.jsx)("h2",{style:{margin:0},children:(0,a.__)("HR Management","wp-erp")})}),(0,o.jsx)(l.CardBody,{children:(0,o.jsx)(l.TabPanel,{className:"wp-erp-hr-tabs",activeClass:"is-active",initialTabName:x,onSelect:e=>h(e),tabs:[{name:"employees",title:(0,a.__)("Employees","wp-erp"),className:"tab-employees"},{name:"leaves",title:(0,a.__)("Leave Requests","wp-erp"),className:"tab-leaves"}],children:e=>"employees"===e.name?n?(0,o.jsx)(l.Flex,{justify:"center",style:{padding:"32px"},children:(0,o.jsx)(l.Spinner,{})}):0===t.length?(0,o.jsx)("p",{style:{padding:"16px",textAlign:"center",color:"#757575"},children:(0,a.__)("No employees found.","wp-erp")}):(0,o.jsx)("div",{style:{overflowX:"auto"},children:(0,o.jsxs)("table",{className:"wp-list-table widefat fixed striped",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:(0,a.__)("Employee ID","wp-erp")}),(0,o.jsx)("th",{children:(0,a.__)("Name","wp-erp")}),(0,o.jsx)("th",{children:(0,a.__)("Designation","wp-erp")}),(0,o.jsx)("th",{children:(0,a.__)("Department","wp-erp")}),(0,o.jsx)("th",{children:(0,a.__)("Status","wp-erp")})]})}),(0,o.jsx)("tbody",{children:t.map(e=>{return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)("strong",{children:e.employee_id})}),(0,o.jsx)("td",{children:e.user_id?`User #${e.user_id}`:"-"}),(0,o.jsx)("td",{children:e.designation||"-"}),(0,o.jsx)("td",{children:e.department||"-"}),(0,o.jsx)("td",{children:(0,o.jsx)("span",{style:{padding:"4px 8px",borderRadius:"2px",backgroundColor:(t=e.status,"active"===t?"#00a32a":"#757575"),color:"#fff",fontSize:"12px",textTransform:"capitalize"},children:e.status})})]},e.id);var t})})]})}):(0,o.jsx)("div",{className:"wp-erp-hr",children:(0,o.jsxs)(l.Card,{children:[(0,o.jsx)(l.CardHeader,{children:(0,o.jsx)("h2",{style:{margin:0},children:(0,a.__)("Leave Requests","wp-erp")})}),(0,o.jsx)(l.CardBody,{children:(0,o.jsx)("p",{style:{padding:"16px",textAlign:"center",color:"#757575"},children:(0,a.__)("Leave management coming soonâ€¦","wp-erp")})})]})})})})]})]})},h=()=>{const[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)(!0),[i,c]=(0,r.useState)(null),[p,x]=(0,r.useState)(!1),[h,u]=(0,r.useState)({subject:"",description:"",priority:"medium",status:"open"}),[j,_]=(0,r.useState)("tickets");(0,r.useEffect)(()=>{m()},[]);const m=async()=>{n(!0),c(null);try{const e=await d()({path:"/wp-erp/v1/helpdesk/tickets"});t(e)}catch(e){c(e.message||(0,a.__)("Failed to fetch tickets","wp-erp"))}finally{n(!1)}},y=async e=>{e.preventDefault(),x(!0),c(null);try{await d()({path:"/wp-erp/v1/helpdesk/tickets",method:"POST",data:h}),u({subject:"",description:"",priority:"medium",status:"open"}),m(),_("tickets")}catch(e){c(e.message||(0,a.__)("Failed to create ticket","wp-erp"))}finally{x(!1)}},w=e=>{switch(e){case"urgent":return"#d63638";case"high":return"#dba617";case"medium":return"#2271b1";default:return"#00a32a"}},g=e=>{switch(e){case"open":return"#d63638";case"closed":return"#757575";default:return"#00a32a"}};return(0,o.jsxs)("div",{className:"wp-erp-helpdesk",style:{padding:"16px"},children:[i&&(0,o.jsx)(l.Notice,{status:"error",isDismissible:!1,onRemove:()=>c(null),children:i}),(0,o.jsxs)(l.Card,{children:[(0,o.jsx)(l.CardHeader,{children:(0,o.jsx)("h2",{style:{margin:0},children:(0,a.__)("Helpdesk Management","wp-erp")})}),(0,o.jsx)(l.CardBody,{children:(0,o.jsx)(l.TabPanel,{className:"wp-erp-helpdesk-tabs",activeClass:"is-active",initialTabName:j,onSelect:e=>_(e),tabs:[{name:"tickets",title:(0,a.__)("Tickets","wp-erp"),className:"tab-tickets"},{name:"create",title:(0,a.__)("Create Ticket","wp-erp"),className:"tab-create"}],children:t=>"tickets"===t.name?s?(0,o.jsx)(l.Flex,{justify:"center",style:{padding:"32px"},children:(0,o.jsx)(l.Spinner,{})}):0===e.length?(0,o.jsx)("p",{style:{padding:"16px",textAlign:"center",color:"#757575"},children:(0,a.__)("No tickets found.","wp-erp")}):(0,o.jsx)("div",{style:{overflowX:"auto"},children:(0,o.jsxs)("table",{className:"wp-list-table widefat fixed striped",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:(0,a.__)("Ticket No","wp-erp")}),(0,o.jsx)("th",{children:(0,a.__)("Subject","wp-erp")}),(0,o.jsx)("th",{children:(0,a.__)("Priority","wp-erp")}),(0,o.jsx)("th",{children:(0,a.__)("Status","wp-erp")}),(0,o.jsx)("th",{children:(0,a.__)("Created","wp-erp")})]})}),(0,o.jsx)("tbody",{children:e.map(e=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)("strong",{children:e.ticket_no})}),(0,o.jsx)("td",{children:e.subject}),(0,o.jsx)("td",{children:(0,o.jsx)("span",{style:{padding:"4px 8px",borderRadius:"2px",backgroundColor:w(e.priority),color:"#fff",fontSize:"12px",textTransform:"capitalize"},children:e.priority})}),(0,o.jsx)("td",{children:(0,o.jsx)("span",{style:{padding:"4px 8px",borderRadius:"2px",backgroundColor:g(e.status),color:"#fff",fontSize:"12px",textTransform:"capitalize"},children:e.status})}),(0,o.jsx)("td",{children:e.created_at})]},e.id))})]})}):(0,o.jsxs)(l.Card,{style:{marginBottom:"24px"},children:[(0,o.jsx)(l.CardHeader,{children:(0,o.jsx)("h2",{style:{margin:0},children:(0,a.__)("Create New Ticket","wp-erp")})}),(0,o.jsx)(l.CardBody,{children:(0,o.jsx)("form",{onSubmit:y,children:(0,o.jsxs)(l.Flex,{direction:"column",gap:4,children:[(0,o.jsx)(l.FlexBlock,{children:(0,o.jsx)(l.TextControl,{label:(0,a.__)("Subject","wp-erp"),value:h.subject,onChange:e=>u({...h,subject:e}),required:!0})}),(0,o.jsx)(l.FlexBlock,{children:(0,o.jsx)(l.TextareaControl,{label:(0,a.__)("Description","wp-erp"),value:h.description,onChange:e=>u({...h,description:e}),required:!0,rows:6})}),(0,o.jsx)(l.FlexBlock,{children:(0,o.jsx)(l.SelectControl,{label:(0,a.__)("Priority","wp-erp"),value:h.priority,options:[{label:(0,a.__)("Low","wp-erp"),value:"low"},{label:(0,a.__)("Medium","wp-erp"),value:"medium"},{label:(0,a.__)("High","wp-erp"),value:"high"},{label:(0,a.__)("Urgent","wp-erp"),value:"urgent"}],onChange:e=>u({...h,priority:e})})}),(0,o.jsx)(l.Flex,{justify:"flex-start",children:(0,o.jsx)(l.Button,{variant:"primary",type:"submit",isBusy:p,children:(0,a.__)("Create Ticket","wp-erp")})})]})})})]})})})]})]})},u=({view:e="list"})=>{const[t,s]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[c,p]=(0,r.useState)(null),[x,h]=(0,r.useState)(!1),[u,j]=(0,r.useState)({voucher_type:"payment",date:(new Date).toISOString().split("T")[0],party_name:"",amount:"",description:"",status:"draft"}),[_,m]=(0,r.useState)("create"===e?"create":"list");(0,r.useEffect)(()=>{"list"===_&&y()},[_]);const y=async()=>{i(!0),p(null);try{const e=await d()({path:"/wp-erp/v1/vouchers"});s(e)}catch(e){p(e.message||(0,a.__)("Failed to fetch vouchers","wp-erp"))}finally{i(!1)}},w=async e=>{e.preventDefault(),h(!0),p(null);try{await d()({path:"/wp-erp/v1/vouchers",method:"POST",data:u}),j({voucher_type:"payment",date:(new Date).toISOString().split("T")[0],party_name:"",amount:"",description:"",status:"draft"}),"create"===_?m("list"):y()}catch(e){p(e.message||(0,a.__)("Failed to create voucher","wp-erp"))}finally{h(!1)}},g=e=>{switch(e){case"approved":return"#00a32a";case"draft":return"#757575";default:return"#dba617"}};return(0,o.jsxs)("div",{className:"wp-erp-vouchers",style:{padding:"16px"},children:[c&&(0,o.jsx)(l.Notice,{status:"error",isDismissible:!1,onRemove:()=>p(null),children:c}),(0,o.jsxs)(l.Card,{children:[(0,o.jsx)(l.CardHeader,{children:(0,o.jsx)("h2",{style:{margin:0},children:(0,a.__)("Voucher Management","wp-erp")})}),(0,o.jsx)(l.CardBody,{children:(0,o.jsx)(l.TabPanel,{className:"wp-erp-vouchers-tabs",activeClass:"is-active",initialTabName:_,onSelect:e=>m(e),tabs:[{name:"list",title:(0,a.__)("All Vouchers","wp-erp"),className:"tab-list"},{name:"create",title:(0,a.__)("Create Voucher","wp-erp"),className:"tab-create"}],children:e=>"list"===e.name?n?(0,o.jsx)(l.Flex,{justify:"center",style:{padding:"32px"},children:(0,o.jsx)(l.Spinner,{})}):0===t.length?(0,o.jsx)("p",{style:{padding:"16px",textAlign:"center",color:"#757575"},children:(0,a.__)("No vouchers found.","wp-erp")}):(0,o.jsx)("div",{style:{overflowX:"auto"},children:(0,o.jsxs)("table",{className:"wp-list-table widefat fixed striped",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:(0,a.__)("Voucher No","wp-erp")}),(0,o.jsx)("th",{children:(0,a.__)("Type","wp-erp")}),(0,o.jsx)("th",{children:(0,a.__)("Date","wp-erp")}),(0,o.jsx)("th",{children:(0,a.__)("Party Name","wp-erp")}),(0,o.jsx)("th",{children:(0,a.__)("Amount","wp-erp")}),(0,o.jsx)("th",{children:(0,a.__)("Status","wp-erp")})]})}),(0,o.jsx)("tbody",{children:t.map(e=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)("strong",{children:e.voucher_no})}),(0,o.jsx)("td",{children:e.voucher_type}),(0,o.jsx)("td",{children:e.date}),(0,o.jsx)("td",{children:e.party_name||"-"}),(0,o.jsx)("td",{children:(0,o.jsx)("strong",{children:e.amount})}),(0,o.jsx)("td",{children:(0,o.jsx)("span",{style:{padding:"4px 8px",borderRadius:"2px",backgroundColor:g(e.status),color:"#fff",fontSize:"12px",textTransform:"capitalize"},children:e.status})})]},e.id))})]})}):(0,o.jsxs)(l.Card,{style:{marginBottom:"24px"},children:[(0,o.jsx)(l.CardHeader,{children:(0,o.jsx)("h2",{style:{margin:0},children:(0,a.__)("Create New Voucher","wp-erp")})}),(0,o.jsx)(l.CardBody,{children:(0,o.jsx)("form",{onSubmit:w,children:(0,o.jsxs)(l.Flex,{direction:"column",gap:4,children:[(0,o.jsxs)(l.Flex,{children:[(0,o.jsx)(l.FlexBlock,{children:(0,o.jsx)(l.SelectControl,{label:(0,a.__)("Voucher Type","wp-erp"),value:u.voucher_type,options:[{label:(0,a.__)("Payment","wp-erp"),value:"payment"},{label:(0,a.__)("Receipt","wp-erp"),value:"receipt"},{label:(0,a.__)("Journal","wp-erp"),value:"journal"}],onChange:e=>j({...u,voucher_type:e}),required:!0})}),(0,o.jsx)(l.FlexBlock,{children:(0,o.jsx)(l.TextControl,{label:(0,a.__)("Date","wp-erp"),type:"date",value:u.date,onChange:e=>j({...u,date:e}),required:!0})})]}),(0,o.jsx)(l.FlexBlock,{children:(0,o.jsx)(l.TextControl,{label:(0,a.__)("Party Name","wp-erp"),value:u.party_name,onChange:e=>j({...u,party_name:e})})}),(0,o.jsx)(l.FlexBlock,{children:(0,o.jsx)(l.TextControl,{label:(0,a.__)("Amount","wp-erp"),type:"number",step:"0.01",value:u.amount,onChange:e=>j({...u,amount:e}),required:!0})}),(0,o.jsx)(l.FlexBlock,{children:(0,o.jsx)(l.TextareaControl,{label:(0,a.__)("Description","wp-erp"),value:u.description,onChange:e=>j({...u,description:e}),rows:4})}),(0,o.jsx)(l.Flex,{justify:"flex-start",children:(0,o.jsx)(l.Button,{variant:"primary",type:"submit",isBusy:x,children:(0,a.__)("Create Voucher","wp-erp")})})]})})})]})})})]})]})},j=({view:e="list"})=>{const[t,s]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[c,p]=(0,r.useState)(null),[x,h]=(0,r.useState)(!1),[u,j]=(0,r.useState)({contact_id:"",invoice_date:(new Date).toISOString().split("T")[0],due_date:"",subtotal:"",tax_amount:"",total_amount:"",notes:"",status:"draft"}),[_,m]=(0,r.useState)("create"===e?"create":"list");(0,r.useEffect)(()=>{"list"===_&&y()},[_]);const y=async()=>{i(!0),p(null);try{const e=await d()({path:"/wp-erp/v1/invoices"});s(e)}catch(e){p(e.message||(0,a.__)("Failed to fetch invoices","wp-erp"))}finally{i(!1)}},w=async e=>{e.preventDefault(),h(!0),p(null);try{await d()({path:"/wp-erp/v1/invoices",method:"POST",data:u}),"create"===_?m("list"):y()}catch(e){p(e.message||(0,a.__)("Failed to create invoice","wp-erp"))}finally{h(!1)}},g=e=>{switch(e){case"paid":return"#00a32a";case"draft":return"#757575";default:return"#dba617"}};return(0,o.jsxs)("div",{className:"wp-erp-invoices",style:{padding:"16px"},children:[c&&(0,o.jsx)(l.Notice,{status:"error",isDismissible:!1,onRemove:()=>p(null),children:c}),(0,o.jsxs)(l.Card,{children:[(0,o.jsx)(l.CardHeader,{children:(0,o.jsx)("h2",{style:{margin:0},children:(0,a.__)("Invoice Management","wp-erp")})}),(0,o.jsx)(l.CardBody,{children:(0,o.jsx)(l.TabPanel,{className:"wp-erp-invoices-tabs",activeClass:"is-active",initialTabName:_,onSelect:e=>m(e),tabs:[{name:"list",title:(0,a.__)("All Invoices","wp-erp"),className:"tab-list"},{name:"create",title:(0,a.__)("Create Invoice","wp-erp"),className:"tab-create"}],children:e=>"list"===e.name?n?(0,o.jsx)(l.Flex,{justify:"center",style:{padding:"32px"},children:(0,o.jsx)(l.Spinner,{})}):0===t.length?(0,o.jsx)("p",{style:{padding:"16px",textAlign:"center",color:"#757575"},children:(0,a.__)("No invoices found.","wp-erp")}):(0,o.jsx)("div",{style:{overflowX:"auto"},children:(0,o.jsxs)("table",{className:"wp-list-table widefat fixed striped",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:(0,a.__)("Invoice No","wp-erp")}),(0,o.jsx)("th",{children:(0,a.__)("Date","wp-erp")}),(0,o.jsx)("th",{children:(0,a.__)("Due Date","wp-erp")}),(0,o.jsx)("th",{children:(0,a.__)("Total Amount","wp-erp")}),(0,o.jsx)("th",{children:(0,a.__)("Status","wp-erp")})]})}),(0,o.jsx)("tbody",{children:t.map(e=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)("strong",{children:e.invoice_no})}),(0,o.jsx)("td",{children:e.invoice_date}),(0,o.jsx)("td",{children:e.due_date||"-"}),(0,o.jsx)("td",{children:(0,o.jsx)("strong",{children:e.total_amount})}),(0,o.jsx)("td",{children:(0,o.jsx)("span",{style:{padding:"4px 8px",borderRadius:"2px",backgroundColor:g(e.status),color:"#fff",fontSize:"12px",textTransform:"capitalize"},children:e.status})})]},e.id))})]})}):(0,o.jsxs)(l.Card,{style:{marginBottom:"24px"},children:[(0,o.jsx)(l.CardHeader,{children:(0,o.jsx)("h2",{style:{margin:0},children:(0,a.__)("Create Invoice","wp-erp")})}),(0,o.jsx)(l.CardBody,{children:(0,o.jsx)("form",{onSubmit:w,children:(0,o.jsxs)(l.Flex,{direction:"column",gap:4,children:[(0,o.jsxs)(l.Flex,{children:[(0,o.jsx)(l.FlexBlock,{children:(0,o.jsx)(l.TextControl,{label:(0,a.__)("Invoice Date","wp-erp"),type:"date",value:u.invoice_date,onChange:e=>j({...u,invoice_date:e}),required:!0})}),(0,o.jsx)(l.FlexBlock,{children:(0,o.jsx)(l.TextControl,{label:(0,a.__)("Due Date","wp-erp"),type:"date",value:u.due_date,onChange:e=>j({...u,due_date:e})})})]}),(0,o.jsx)(l.FlexBlock,{children:(0,o.jsx)(l.TextControl,{label:(0,a.__)("Subtotal","wp-erp"),type:"number",step:"0.01",value:u.subtotal,onChange:e=>{const t=parseFloat(e)||0,s=parseFloat(u.tax_amount)||0;j({...u,subtotal:e,total_amount:(t+s).toFixed(2)})}})}),(0,o.jsx)(l.FlexBlock,{children:(0,o.jsx)(l.TextControl,{label:(0,a.__)("Tax Amount","wp-erp"),type:"number",step:"0.01",value:u.tax_amount,onChange:e=>{const t=parseFloat(u.subtotal)||0,s=parseFloat(e)||0;j({...u,tax_amount:e,total_amount:(t+s).toFixed(2)})}})}),(0,o.jsx)(l.FlexBlock,{children:(0,o.jsx)(l.TextControl,{label:(0,a.__)("Total Amount","wp-erp"),type:"number",step:"0.01",value:u.total_amount,readOnly:!0})}),(0,o.jsx)(l.FlexBlock,{children:(0,o.jsx)(l.TextareaControl,{label:(0,a.__)("Notes","wp-erp"),value:u.notes,onChange:e=>j({...u,notes:e}),rows:4})}),(0,o.jsx)(l.Flex,{justify:"flex-start",children:(0,o.jsx)(l.Button,{variant:"primary",type:"submit",isBusy:x,children:(0,a.__)("Create Invoice","wp-erp")})})]})})})]})})})]})]})},_=({view:e="list"})=>{const[t,s]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[c,p]=(0,r.useState)(null),[x,h]=(0,r.useState)(!1),[u,j]=(0,r.useState)({expense_type:"general",date:(new Date).toISOString().split("T")[0],amount:"",description:"",category:"",payment_method:"cash",status:"pending"}),[_,m]=(0,r.useState)("create"===e?"create":"list");(0,r.useEffect)(()=>{"list"===_&&y()},[_]);const y=async()=>{i(!0),p(null);try{const e=await d()({path:"/wp-erp/v1/expenses"});s(e)}catch(e){p(e.message||(0,a.__)("Failed to fetch expenses","wp-erp"))}finally{i(!1)}},w=async e=>{e.preventDefault(),h(!0),p(null);try{await d()({path:"/wp-erp/v1/expenses",method:"POST",data:u}),j({expense_type:"general",date:(new Date).toISOString().split("T")[0],amount:"",description:"",category:"",payment_method:"cash",status:"pending"}),"create"===_?m("list"):y()}catch(e){p(e.message||(0,a.__)("Failed to create expense","wp-erp"))}finally{h(!1)}},g=e=>{switch(e){case"approved":return"#00a32a";case"rejected":return"#d63638";default:return"#dba617"}};return(0,o.jsxs)("div",{className:"wp-erp-expenses",style:{padding:"16px"},children:[c&&(0,o.jsx)(l.Notice,{status:"error",isDismissible:!1,onRemove:()=>p(null),children:c}),(0,o.jsxs)(l.Card,{children:[(0,o.jsx)(l.CardHeader,{children:(0,o.jsx)("h2",{style:{margin:0},children:(0,a.__)("Expense Management","wp-erp")})}),(0,o.jsx)(l.CardBody,{children:(0,o.jsx)(l.TabPanel,{className:"wp-erp-expenses-tabs",activeClass:"is-active",initialTabName:_,onSelect:e=>m(e),tabs:[{name:"list",title:(0,a.__)("All Expenses","wp-erp"),className:"tab-list"},{name:"create",title:(0,a.__)("Add Expense","wp-erp"),className:"tab-create"}],children:e=>"list"===e.name?n?(0,o.jsx)(l.Flex,{justify:"center",style:{padding:"32px"},children:(0,o.jsx)(l.Spinner,{})}):0===t.length?(0,o.jsx)("p",{style:{padding:"16px",textAlign:"center",color:"#757575"},children:(0,a.__)("No expenses found.","wp-erp")}):(0,o.jsx)("div",{style:{overflowX:"auto"},children:(0,o.jsxs)("table",{className:"wp-list-table widefat fixed striped",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:(0,a.__)("Expense No","wp-erp")}),(0,o.jsx)("th",{children:(0,a.__)("Type","wp-erp")}),(0,o.jsx)("th",{children:(0,a.__)("Date","wp-erp")}),(0,o.jsx)("th",{children:(0,a.__)("Amount","wp-erp")}),(0,o.jsx)("th",{children:(0,a.__)("Category","wp-erp")}),(0,o.jsx)("th",{children:(0,a.__)("Status","wp-erp")})]})}),(0,o.jsx)("tbody",{children:t.map(e=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)("strong",{children:e.expense_no})}),(0,o.jsx)("td",{children:e.expense_type}),(0,o.jsx)("td",{children:e.date}),(0,o.jsx)("td",{children:(0,o.jsx)("strong",{children:e.amount})}),(0,o.jsx)("td",{children:e.category||"-"}),(0,o.jsx)("td",{children:(0,o.jsx)("span",{style:{padding:"4px 8px",borderRadius:"2px",backgroundColor:g(e.status),color:"#fff",fontSize:"12px",textTransform:"capitalize"},children:e.status})})]},e.id))})]})}):(0,o.jsxs)(l.Card,{style:{marginBottom:"24px"},children:[(0,o.jsx)(l.CardHeader,{children:(0,o.jsx)("h2",{style:{margin:0},children:(0,a.__)("Add Expense","wp-erp")})}),(0,o.jsx)(l.CardBody,{children:(0,o.jsx)("form",{onSubmit:w,children:(0,o.jsxs)(l.Flex,{direction:"column",gap:4,children:[(0,o.jsxs)(l.Flex,{children:[(0,o.jsx)(l.FlexBlock,{children:(0,o.jsx)(l.SelectControl,{label:(0,a.__)("Expense Type","wp-erp"),value:u.expense_type,options:[{label:(0,a.__)("General","wp-erp"),value:"general"},{label:(0,a.__)("Travel","wp-erp"),value:"travel"},{label:(0,a.__)("Meals","wp-erp"),value:"meals"},{label:(0,a.__)("Office Supplies","wp-erp"),value:"office_supplies"}],onChange:e=>j({...u,expense_type:e})})}),(0,o.jsx)(l.FlexBlock,{children:(0,o.jsx)(l.TextControl,{label:(0,a.__)("Date","wp-erp"),type:"date",value:u.date,onChange:e=>j({...u,date:e}),required:!0})})]}),(0,o.jsxs)(l.Flex,{children:[(0,o.jsx)(l.FlexBlock,{children:(0,o.jsx)(l.TextControl,{label:(0,a.__)("Amount","wp-erp"),type:"number",step:"0.01",value:u.amount,onChange:e=>j({...u,amount:e}),required:!0})}),(0,o.jsx)(l.FlexBlock,{children:(0,o.jsx)(l.TextControl,{label:(0,a.__)("Category","wp-erp"),value:u.category,onChange:e=>j({...u,category:e})})})]}),(0,o.jsxs)(l.Flex,{children:[(0,o.jsx)(l.FlexBlock,{children:(0,o.jsx)(l.SelectControl,{label:(0,a.__)("Payment Method","wp-erp"),value:u.payment_method,options:[{label:(0,a.__)("Cash","wp-erp"),value:"cash"},{label:(0,a.__)("Bank Transfer","wp-erp"),value:"bank_transfer"},{label:(0,a.__)("Credit Card","wp-erp"),value:"credit_card"},{label:(0,a.__)("Cheque","wp-erp"),value:"cheque"}],onChange:e=>j({...u,payment_method:e})})}),(0,o.jsx)(l.FlexBlock,{children:(0,o.jsx)(l.SelectControl,{label:(0,a.__)("Status","wp-erp"),value:u.status,options:[{label:(0,a.__)("Pending","wp-erp"),value:"pending"},{label:(0,a.__)("Approved","wp-erp"),value:"approved"},{label:(0,a.__)("Rejected","wp-erp"),value:"rejected"}],onChange:e=>j({...u,status:e})})})]}),(0,o.jsx)(l.FlexBlock,{children:(0,o.jsx)(l.TextareaControl,{label:(0,a.__)("Description","wp-erp"),value:u.description,onChange:e=>j({...u,description:e}),rows:4})}),(0,o.jsx)(l.Flex,{justify:"flex-start",children:(0,o.jsx)(l.Button,{variant:"primary",type:"submit",isBusy:x,children:(0,a.__)("Add Expense","wp-erp")})})]})})})]})})})]})]})},m=({view:e="create"})=>{const[t,s]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[c,p]=(0,r.useState)(null),[x,h]=(0,r.useState)(!1),[u,j]=(0,r.useState)("list"===e?"list":"create"),[_,m]=(0,r.useState)(1),[y]=(0,r.useState)(90),[w,g]=(0,r.useState)(90),[f,v]=(0,r.useState)(!1),[b,C]=(0,r.useState)(null),S=(0,r.useRef)(null),[T,F]=(0,r.useState)(""),[N,B]=(0,r.useState)(""),[k,D]=(0,r.useState)("all");(0,r.useEffect)(()=>{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),1).toISOString().split("T")[0],s=new Date(e.getFullYear(),e.getMonth()+1,0).toISOString().split("T")[0];F(t),B(s)},[]),(0,r.useEffect)(()=>{"list"===u&&A()},[u]),(0,r.useEffect)(()=>{g(_*y)},[_,y]);const A=async()=>{i(!0),p(null);try{const e=await d()({path:"/wp-erp/v1/food-pass"});s(e)}catch(e){p(e.message||(0,a.__)("Failed to fetch food passes","wp-erp"))}finally{i(!1)}},P=async e=>{e.preventDefault(),h(!0),p(null);const t=new Date,s=t.toISOString().split("T")[0],n=t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),r=t.getHours()<16?"Lunch":"Dinner",l={quantity:parseInt(_),amount:w,date:s,time:n,rate:y,mealType:r,id:"PENDING..."};C(l),v(!0),setTimeout(()=>{window.print()},500);const i={issue_date:s,valid_from:s,valid_to:s,total_meals:parseInt(_),meals_per_day:parseInt(_),status:"active",notes:JSON.stringify({amount:w,rate:y,time:n,mealType:r})};try{const e=await d()({path:"/wp-erp/v1/food-pass",method:"POST",data:i});C(t=>({...t,id:e.id})),A(),m(1)}catch(e){p(e.message&&e.data?.status?`${e.message} (${e.data.status})`:e.message||(0,a.__)("Failed to save food pass","wp-erp"))}finally{h(!1)}};return(0,o.jsxs)("div",{className:"wp-erp-food-pass",style:{padding:"16px"},children:[f&&b&&(0,o.jsxs)("div",{className:"food-pass-receipt",ref:S,style:{display:"none",fontFamily:"monospace",width:"300px",margin:"0 auto",padding:"20px",border:"1px solid #000"},children:[(0,o.jsx)("style",{children:"\n\t\t\t\t\t\t\t@media print {\n\t\t\t\t\t\t\t\tbody * {\n\t\t\t\t\t\t\t\t\tvisibility: hidden;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t.food-pass-receipt, .food-pass-receipt * {\n\t\t\t\t\t\t\t\t\tvisibility: visible;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t.food-pass-receipt {\n\t\t\t\t\t\t\t\t\tdisplay: block !important;\n\t\t\t\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\t\t\t\tleft: 0;\n\t\t\t\t\t\t\t\t\ttop: 0;\n\t\t\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t"}),(0,o.jsxs)("div",{style:{textAlign:"center",borderBottom:"1px dashed #000",paddingBottom:"10px",marginBottom:"10px"},children:[(0,o.jsx)("h3",{style:{margin:"0 0 5px 0"},children:"Shree Swaminarayan Gurukul"}),(0,o.jsx)("div",{style:{borderTop:"1px dashed #000",margin:"5px auto",width:"80%"}}),(0,o.jsx)("h4",{style:{margin:0},children:"ðŸ² FOOD PASS ðŸ²"}),(0,o.jsx)("div",{style:{borderTop:"1px dashed #000",margin:"5px auto",width:"80%"}})]}),(0,o.jsx)("table",{style:{width:"100%",lineHeight:"1.5"},children:(0,o.jsxs)("tbody",{children:[(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)("strong",{children:"ID"})}),(0,o.jsxs)("td",{children:[": ",b.id]})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)("strong",{children:"Date"})}),(0,o.jsxs)("td",{children:[": ",b.date]})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)("strong",{children:"Time"})}),(0,o.jsxs)("td",{children:[": ",b.time]})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)("strong",{children:"Type"})}),(0,o.jsxs)("td",{children:[": ",b.mealType]})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)("strong",{children:"Quantity"})}),(0,o.jsxs)("td",{children:[": ",b.quantity]})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)("strong",{children:"Rate"})}),(0,o.jsxs)("td",{children:[": â‚¹",b.rate]})]})]})}),(0,o.jsx)("div",{style:{borderTop:"1px dashed #000",margin:"10px 0",paddingTop:"5px"},children:(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:"bold"},children:[(0,o.jsx)("span",{children:"Total"}),(0,o.jsxs)("span",{children:[": â‚¹",b.amount]})]})}),(0,o.jsx)("div",{style:{textAlign:"center",marginTop:"20px"},children:(0,o.jsx)("p",{children:"ðŸ™ðŸ» Jay Swaminarayan ðŸ™ðŸ»"})})]}),c&&(0,o.jsx)(l.Notice,{status:"error",isDismissible:!1,onRemove:()=>p(null),children:c}),(0,o.jsxs)(l.Card,{children:[(0,o.jsx)(l.CardHeader,{children:(0,o.jsx)("h2",{style:{margin:0},children:(0,a.__)("Food Pass Management","wp-erp")})}),(0,o.jsx)(l.CardBody,{children:(0,o.jsx)(l.TabPanel,{className:"wp-erp-food-pass-tabs",activeClass:"is-active",initialTabName:u,onSelect:e=>j(e),tabs:[{name:"create",title:(0,a.__)("Create Food Pass","wp-erp"),className:"tab-create"},{name:"list",title:(0,a.__)("All Food Passes","wp-erp"),className:"tab-list"},{name:"reports",title:(0,a.__)("Reports","wp-erp"),className:"tab-reports"}],children:e=>"list"===e.name?(()=>{const e=(()=>{const e=new Date,s=e.toISOString().split("T")[0],n=e.getMonth(),r=e.getFullYear(),a=new Date(e.getFullYear(),e.getMonth()-1,1),l=a.getMonth(),i=a.getFullYear(),d={today:{lunch:0,dinner:0,total:0},thisMonth:{count:0,amount:0},lastMonth:{count:0,amount:0}};return t.forEach(e=>{const t=new Date(e.issue_date),a=t.getMonth(),o=t.getFullYear();let c=0,p="Lunch";try{const t=e.notes?JSON.parse(e.notes):{};c=t.amount?parseFloat(t.amount):90*(parseInt(e.total_meals)||0),t.mealType&&(p=t.mealType)}catch(t){c=90*(parseInt(e.total_meals)||0)}const x=parseInt(e.total_meals||0);e.issue_date===s&&("Lunch"===p&&(d.today.lunch+=x),"Dinner"===p&&(d.today.dinner+=x),d.today.total+=x),a===n&&o===r&&(d.thisMonth.count+=x,d.thisMonth.amount+=c),a===l&&o===i&&(d.lastMonth.count+=x,d.lastMonth.amount+=c)}),d})();return n?(0,o.jsx)(l.Flex,{justify:"center",style:{padding:"32px"},children:(0,o.jsx)(l.Spinner,{})}):(0,o.jsxs)("div",{children:[(0,o.jsx)(l.Card,{style:{marginBottom:"20px",backgroundColor:"#fff",border:"1px solid #e0e0e0"},children:(0,o.jsxs)(l.CardBody,{children:[(0,o.jsx)("h4",{style:{margin:"0 0 10px 0",fontSize:"13px",color:"#757575",textTransform:"uppercase"},children:(0,a.__)("Monthly Performance")}),(0,o.jsxs)(l.Flex,{gap:4,children:[(0,o.jsx)(l.FlexBlock,{children:(0,o.jsxs)("div",{style:{border:"1px solid #e0e0e0",padding:"15px",borderRadius:"8px"},children:[(0,o.jsx)("div",{style:{fontSize:"12px",color:"#646970",marginBottom:"4px"},children:(0,a.__)("This Month")}),(0,o.jsxs)(l.Flex,{justify:"flex-start",gap:3,align:"baseline",children:[(0,o.jsxs)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#101517"},children:["â‚¹",e.thisMonth.amount.toLocaleString("en-IN")]}),(0,o.jsxs)("div",{style:{fontSize:"13px",color:"#757575"},children:["(",e.thisMonth.count," Passes)"]})]})]})}),(0,o.jsx)(l.FlexBlock,{children:(0,o.jsxs)("div",{style:{border:"1px solid #e0e0e0",padding:"15px",borderRadius:"8px"},children:[(0,o.jsx)("div",{style:{fontSize:"12px",color:"#646970",marginBottom:"4px"},children:(0,a.__)("Last Month")}),(0,o.jsxs)(l.Flex,{justify:"flex-start",gap:3,align:"baseline",children:[(0,o.jsxs)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#646970"},children:["â‚¹",e.lastMonth.amount.toLocaleString("en-IN")]}),(0,o.jsxs)("div",{style:{fontSize:"13px",color:"#757575"},children:["(",e.lastMonth.count," Passes)"]})]})]})})]})]})}),0===t.length?(0,o.jsx)("p",{style:{padding:"16px",textAlign:"center",color:"#757575"},children:(0,a.__)("No food passes found.","wp-erp")}):(0,o.jsx)("div",{style:{overflowX:"auto"},children:(0,o.jsxs)("table",{className:"wp-list-table widefat fixed striped",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:(0,a.__)("Pass ID","wp-erp")}),(0,o.jsx)("th",{children:(0,a.__)("Date","wp-erp")}),(0,o.jsx)("th",{children:(0,a.__)("Meal Type","wp-erp")}),(0,o.jsx)("th",{children:(0,a.__)("Quantity","wp-erp")}),(0,o.jsx)("th",{children:(0,a.__)("Amount","wp-erp")})]})}),(0,o.jsx)("tbody",{children:t.map(e=>{let t="-",s="-";try{const n=e.notes?JSON.parse(e.notes):{};n.amount?t=`â‚¹${n.amount}`:e.total_meals&&(t="â‚¹"+90*e.total_meals),s=n.mealType?n.mealType:"Lunch"}catch(n){e.total_meals&&(t="â‚¹"+90*e.total_meals,s="Lunch")}return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)("strong",{children:e.id})}),(0,o.jsx)("td",{children:e.issue_date}),(0,o.jsx)("td",{children:(0,o.jsx)("span",{style:{padding:"2px 6px",borderRadius:"4px",background:"Lunch"===s?"#e5f5fa":"#fcf0f1",color:"Lunch"===s?"#00869d":"#d63638",fontWeight:"500"},children:s})}),(0,o.jsx)("td",{children:e.total_meals}),(0,o.jsx)("td",{children:t})]},e.id)})})]})})]})})():"reports"===e.name?(()=>{const e=(()=>{if(!T||!N)return[];const e=new Date(T),s=new Date(N);return s.setHours(23,59,59,999),t.filter(t=>{const n=new Date(t.issue_date);if(n<e||n>s)return!1;if("all"!==k){let e="Lunch";try{const s=t.notes?JSON.parse(t.notes):{};s.mealType&&(e=s.mealType)}catch(e){}if(e.toLowerCase()!==k.toLowerCase())return!1}return!0})})();let s=0,n=0,r=0,i=0;return e.forEach(e=>{const t=parseInt(e.total_meals||0);let a=0,l="Lunch";try{const s=e.notes?JSON.parse(e.notes):{};a=s.amount?parseFloat(s.amount):90*t,s.mealType&&(l=s.mealType)}catch(e){a=90*t}s+=t,n+=a,"Lunch"===l&&(r+=t),"Dinner"===l&&(i+=t)}),(0,o.jsxs)("div",{className:"food-pass-reports",children:[(0,o.jsx)(l.Card,{style:{marginBottom:"20px",padding:"20px"},children:(0,o.jsxs)(l.Flex,{gap:4,align:"end",wrap:!0,children:[(0,o.jsx)(l.FlexBlock,{children:(0,o.jsx)(l.TextControl,{label:(0,a.__)("Start Date","wp-erp"),type:"date",value:T,onChange:e=>F(e)})}),(0,o.jsx)(l.FlexBlock,{children:(0,o.jsx)(l.TextControl,{label:(0,a.__)("End Date","wp-erp"),type:"date",value:N,onChange:e=>B(e)})}),(0,o.jsx)(l.FlexBlock,{children:(0,o.jsxs)("div",{className:"components-base-control",children:[(0,o.jsx)("label",{className:"components-base-control__label",style:{marginBottom:"8px",display:"block"},children:(0,a.__)("Meal Type","wp-erp")}),(0,o.jsxs)("select",{value:k,onChange:e=>D(e.target.value),style:{width:"100%",height:"40px",borderColor:"#757575",borderRadius:"4px",padding:"0 8px"},children:[(0,o.jsx)("option",{value:"all",children:(0,a.__)("All Types")}),(0,o.jsx)("option",{value:"lunch",children:(0,a.__)("Lunch")}),(0,o.jsx)("option",{value:"dinner",children:(0,a.__)("Dinner")})]})]})}),(0,o.jsx)(l.FlexBlock,{style:{flex:"0 0 auto"},children:(0,o.jsx)(l.Button,{variant:"secondary",onClick:()=>{const e=(new Date).toISOString().split("T")[0];F(e),B(e)},children:(0,a.__)("Today")})})]})}),(0,o.jsxs)(l.Flex,{gap:4,style:{marginBottom:"20px"},children:[(0,o.jsx)(l.FlexBlock,{children:(0,o.jsxs)(l.Card,{style:{padding:"20px",textAlign:"center",borderTop:"4px solid #2271b1"},children:[(0,o.jsx)("div",{style:{color:"#646970",fontSize:"13px",textTransform:"uppercase"},children:(0,a.__)("Total Revenue")}),(0,o.jsxs)("div",{style:{fontSize:"28px",fontWeight:"bold",color:"#101517"},children:["â‚¹",n.toLocaleString("en-IN")]})]})}),(0,o.jsx)(l.FlexBlock,{children:(0,o.jsxs)(l.Card,{style:{padding:"20px",textAlign:"center",borderTop:"4px solid #00a32a"},children:[(0,o.jsx)("div",{style:{color:"#646970",fontSize:"13px",textTransform:"uppercase"},children:(0,a.__)("Passes Sold")}),(0,o.jsx)("div",{style:{fontSize:"28px",fontWeight:"bold"},children:s}),(0,o.jsxs)("div",{style:{fontSize:"12px",color:"#757575",marginTop:"4px"},children:[r," Lunch â€¢ ",i," Dinner"]})]})})]}),e.length>0?(0,o.jsx)("div",{style:{overflowX:"auto",background:"#fff",border:"1px solid #e0e0e0"},children:(0,o.jsxs)("table",{className:"wp-list-table widefat fixed striped",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:(0,a.__)("Pass ID","wp-erp")}),(0,o.jsx)("th",{children:(0,a.__)("Date","wp-erp")}),(0,o.jsx)("th",{children:(0,a.__)("Meal Type","wp-erp")}),(0,o.jsx)("th",{children:(0,a.__)("Quantity","wp-erp")}),(0,o.jsx)("th",{children:(0,a.__)("Amount","wp-erp")})]})}),(0,o.jsx)("tbody",{children:e.map(e=>{let t="-",s="-";try{const n=e.notes?JSON.parse(e.notes):{};n.amount?t=`â‚¹${n.amount}`:e.total_meals&&(t="â‚¹"+90*e.total_meals),s=n.mealType||"Lunch"}catch(n){t="â‚¹"+90*e.total_meals,s="Lunch"}return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)("strong",{children:e.id})}),(0,o.jsx)("td",{children:e.issue_date}),(0,o.jsx)("td",{children:(0,o.jsx)("span",{style:{padding:"2px 6px",borderRadius:"4px",background:"Lunch"===s?"#e5f5fa":"#fcf0f1",color:"Lunch"===s?"#00869d":"#d63638",fontWeight:"500"},children:s})}),(0,o.jsx)("td",{children:e.total_meals}),(0,o.jsx)("td",{children:t})]},e.id)})})]})}):(0,o.jsx)("div",{style:{padding:"40px",textAlign:"center",color:"#757575",background:"#fff",border:"1px solid #e0e0e0"},children:(0,a.__)("No records found for the selected range.","wp-erp")})]})})():(0,o.jsxs)(l.Card,{style:{marginBottom:"24px",maxWidth:"400px"},children:[(0,o.jsx)(l.CardHeader,{children:(0,o.jsx)("h2",{style:{margin:0},children:(0,a.__)("Food Pass","wp-erp")})}),(0,o.jsx)(l.CardBody,{children:(0,o.jsx)("form",{onSubmit:P,children:(0,o.jsxs)(l.Flex,{direction:"column",gap:4,children:[(0,o.jsx)(l.FlexBlock,{children:(0,o.jsx)(l.TextControl,{label:(0,a.__)("Quantity:","wp-erp"),type:"number",min:"1",value:_,onChange:e=>m(e),required:!0})}),(0,o.jsx)(l.FlexBlock,{children:(0,o.jsx)(l.TextControl,{label:(0,a.__)("Total Amount to Pay:","wp-erp"),value:`â‚¹${w}`,readOnly:!0,help:(0,a.__)("Rate: â‚¹90 per meal","wp-erp")})}),(0,o.jsx)(l.Flex,{justify:"flex-start",children:(0,o.jsx)(l.Button,{variant:"primary",type:"submit",isBusy:x,children:(0,a.__)("Print Food Pass","wp-erp")})}),(0,o.jsx)("p",{style:{fontSize:"12px",color:"#646970",margin:0},children:(0,a.__)("Prints instantly; data queued for syncing.","wp-erp")})]})})})]})})})]})]})},y=()=>{const[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)(!0),[i,c]=(0,r.useState)(null),[p,x]=(0,r.useState)(!1),[h,u]=(0,r.useState)("create"),[j,_]=(0,r.useState)(""),[m,y]=(0,r.useState)(""),[w,g]=(0,r.useState)(""),[f,v]=(0,r.useState)(""),[b,C]=(0,r.useState)(""),[S,T]=(0,r.useState)([]),[F,N]=(0,r.useState)(""),[B,k]=(0,r.useState)(!1),[D,A]=(0,r.useState)(null);(0,r.useRef)(null),(0,r.useEffect)(()=>{P()},[]);const P=async()=>{try{const e=await d()({path:"/wp-erp/v1/donations/ledgers"});T(e),e.length>0&&!w&&g(e[0])}catch(e){console.error(e)}},I=async()=>{if(m)try{const e=await d()({path:`/wp-erp/v1/donations/donor?phone=${m}`});e.found&&e.donor_name&&_(e.donor_name)}catch(e){console.log("Donor lookup failed",e)}},R=async s=>{s.preventDefault(),x(!0),c(null);const n=(new Date).toISOString().split("T")[0],r={donor_name:j,phone:m,ledger:w,amount:f,notes:b,issue_date:n},l={...r,id:"PENDING...",date:n};A(l),k(!0),setTimeout(()=>window.print(),500);try{const s=await d()({path:"/wp-erp/v1/donations",method:"POST",data:r});A(e=>({...e,id:s.id})),t([s,...e]),_(""),y(""),v(""),C("")}catch(e){c(e.message||(0,a.__)("Failed to save donation","wp-erp"))}finally{x(!1)}},M=async()=>{if(!F)return;const e=[...S,F];T(e),N("");try{await d()({path:"/wp-erp/v1/donations/ledgers",method:"POST",data:{ledgers:e}})}catch(e){c("Failed to save ledger")}};return(0,o.jsxs)("div",{className:"wp-erp-donations",style:{padding:"20px"},children:[i&&(0,o.jsx)(l.Notice,{status:"error",onRemove:()=>c(null),children:i}),B&&D&&(0,o.jsxs)("div",{className:"donation-receipt",style:{display:"none"},children:[(0,o.jsx)("style",{children:"\n\t\t\t\t\t\t@media print {\n\t\t\t\t\t\t\tbody * { visibility: hidden; }\n\t\t\t\t\t\t\t.donation-receipt, .donation-receipt * { visibility: visible; }\n\t\t\t\t\t\t\t.donation-receipt { \n\t\t\t\t\t\t\t\tdisplay: block !important; \n\t\t\t\t\t\t\t\tposition: absolute; \n\t\t\t\t\t\t\t\ttop: 0; \n\t\t\t\t\t\t\t\tleft: 0; \n\t\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t\t\tfont-family: monospace;\n\t\t\t\t\t\t\t\tpadding: 20px;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t"}),(0,o.jsx)("h2",{style:{textAlign:"center"},children:"Donation Receipt"}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"ID:"})," ",D.id]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Date:"})," ",D.date]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Donor:"})," ",D.donor_name]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Phone:"})," ",D.phone]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Ledger:"})," ",D.ledger]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Amount:"})," â‚¹",D.amount]}),(0,o.jsx)("p",{style:{textAlign:"center",marginTop:"20px"},children:"Thank you!"})]}),(0,o.jsx)(l.TabPanel,{className:"wp-erp-donations-tabs",activeClass:"is-active",onSelect:u,tabs:[{name:"create",title:"Create Donation",className:"tab-create"},{name:"history",title:"History",className:"tab-history"},{name:"settings",title:"Settings",className:"tab-settings"}],children:r=>"create"===r.name?(0,o.jsxs)(l.Card,{children:[(0,o.jsx)(l.CardHeader,{children:(0,o.jsx)("h3",{children:(0,a.__)("New Donation","wp-erp")})}),(0,o.jsx)(l.CardBody,{children:(0,o.jsx)("form",{onSubmit:R,children:(0,o.jsxs)(l.Flex,{direction:"column",gap:4,children:[(0,o.jsx)(l.TextControl,{label:(0,a.__)("Date","wp-erp"),value:(new Date).toLocaleDateString(),readOnly:!0}),(0,o.jsx)(l.TextControl,{label:(0,a.__)("Phone Number","wp-erp"),value:m,onChange:y,onBlur:I,required:!0}),(0,o.jsx)(l.TextControl,{label:(0,a.__)("Donor Name","wp-erp"),value:j,onChange:_,required:!0}),(0,o.jsx)(l.SelectControl,{label:(0,a.__)("Ledger","wp-erp"),value:w,options:S.map(e=>({label:e,value:e})),onChange:g}),(0,o.jsx)(l.TextControl,{label:(0,a.__)("Note (Optional)","wp-erp"),value:b,onChange:C}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"components-base-control__label",children:(0,a.__)("Amount","wp-erp")}),(0,o.jsx)(l.Flex,{gap:2,wrap:!0,style:{marginBottom:"10px"},children:[100,200,250,500,1e3].map(e=>(0,o.jsxs)(l.Button,{variant:parseInt(f)===e?"primary":"secondary",onClick:()=>v(e),children:["â‚¹",e]},e))}),(0,o.jsx)(l.TextControl,{placeholder:(0,a.__)("Custom Amount","wp-erp"),type:"number",value:f,onChange:v,required:!0})]}),(0,o.jsxs)("div",{style:{fontSize:"18px",fontWeight:"bold"},children:["Total: â‚¹",f||0]}),(0,o.jsx)(l.Button,{type:"submit",variant:"primary",isBusy:p,children:(0,a.__)("Print & Save","wp-erp")})]})})})]}):"history"===r.name?(s&&0===e.length&&(async()=>{n(!0);try{const e=await d()({path:"/wp-erp/v1/donations"});t(e)}catch(e){c(e.message)}finally{n(!1)}})(),(0,o.jsxs)(l.Card,{children:[(0,o.jsx)(l.CardHeader,{children:(0,o.jsx)("h3",{children:(0,a.__)("Donation History")})}),(0,o.jsx)(l.CardBody,{children:0===e.length?(0,o.jsx)("p",{style:{textAlign:"center",color:"#757575"},children:(0,a.__)("No donations found.")}):(0,o.jsxs)("table",{className:"wp-list-table widefat fixed striped",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:(0,a.__)("ID")}),(0,o.jsx)("th",{children:(0,a.__)("Date")}),(0,o.jsx)("th",{children:(0,a.__)("Donor")}),(0,o.jsx)("th",{children:(0,a.__)("Phone")}),(0,o.jsx)("th",{children:(0,a.__)("Ledger")}),(0,o.jsx)("th",{children:(0,a.__)("Amount")})]})}),(0,o.jsx)("tbody",{children:e.map(e=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:e.id}),(0,o.jsx)("td",{children:e.issue_date}),(0,o.jsx)("td",{children:e.donor_name}),(0,o.jsx)("td",{children:e.phone}),(0,o.jsx)("td",{children:e.ledger}),(0,o.jsxs)("td",{children:["â‚¹",e.amount]})]},e.id))})]})})]})):"settings"===r.name?(0,o.jsxs)(l.Card,{children:[(0,o.jsx)(l.CardHeader,{children:(0,o.jsx)("h3",{children:"Manage Ledgers"})}),(0,o.jsxs)(l.CardBody,{children:[(0,o.jsx)("ul",{children:S.map((e,t)=>(0,o.jsx)("li",{children:e},t))}),(0,o.jsxs)(l.Flex,{children:[(0,o.jsx)(l.TextControl,{value:F,onChange:N,placeholder:"New Ledger Name"}),(0,o.jsx)(l.Button,{variant:"secondary",onClick:M,children:"Add"})]})]})]}):void 0})]})};function w(){const e=document.getElementById("wp-erp-crm-root");e&&(console.log("Mounting CRM App"),(0,n.H)(e).render((0,o.jsx)(c,{})));const t=document.getElementById("wp-erp-accounting-root");t&&(console.log("Mounting Accounting App"),(0,n.H)(t).render((0,o.jsx)(p,{})));const s=document.getElementById("wp-erp-hr-root");s&&(0,n.H)(s).render((0,o.jsx)(x,{}));const r=document.getElementById("wp-erp-helpdesk-root");r&&(0,n.H)(r).render((0,o.jsx)(h,{}));const a=document.getElementById("wp-erp-vouchers-root");a&&(0,n.H)(a).render((0,o.jsx)(u,{}));const l=document.getElementById("wp-erp-invoices-root");l&&(0,n.H)(l).render((0,o.jsx)(j,{}));const i=document.getElementById("wp-erp-expenses-root");i&&(0,n.H)(i).render((0,o.jsx)(_,{}));const d=document.getElementById("wp-erp-food-pass-root");d&&(0,n.H)(d).render((0,o.jsx)(m,{}));const w=document.getElementById("wp-erp-donations-root");w&&(0,n.H)(w).render((0,o.jsx)(y,{}))}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",w):w()})();